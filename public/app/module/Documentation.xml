<module:DocumentationClass xmlns="http://www.w3.org/1999/xhtml"
                           xmlns:js="js.core" xmlns:ui="js.ui"
                           xmlns:conf="js.conf" xmlns:data="js.data"
                           xmlns:module="app.module">


    <data:RestDataSource cid="api" endPoint="http://rappidjs.com/doc" gateway="." suffix="json">
        <conf:DataSourceConfiguration>
            <conf:ResourceConfiguration path="doc" modelClassName="documentation.model.Class"/>
        </conf:DataSourceConfiguration>
    </data:RestDataSource>

    <data:FilterDataView baseList="{classes}" cid="filteredClasses" filterFnc="{filterDocs}"
                         searchString="{searchString}"/>

    <js:Router>
        <conf:RouteConfiguration onexec="showClass" route="^api\/(.+)$"/>
    </js:Router>

    <js:Head title="{title(doc.id)}"
             author="Tony Findeisen &amp; Marcus Krejpowicz"/>

    <js:Content name="main">
        <div id="documentation">
            <div class="row">
                <div class="span3 classes">
                    <input type="text" placeholder="Filter" value="{{searchString}}"/>
                    <ui:SelectionView items="{filteredClasses.list}" itemKey="$class" selectedItem="{doc}"
                                      allowDeselection="false"
                                      class="nav nav-pills nav-stacked" tagName="ul">
                        <js:Template name="item">
                            <li>
                                <a href="api/{$class.id}">{$class.id}</a>
                            </li>
                        </js:Template>
                    </ui:SelectionView>
                </div>
                <div class="span9 content">
                    <div visible="{hasCurrentDocumentation()}">
                        <h1>{doc.id}</h1>

                        <p class="lead">
                            {doc.description}
                        </p>

                        <div class="row">
                            <div class="span3">
                                <dl class="dl-horizontal">
                                    <dt>Package</dt>
                                    <dd>{doc.packageName()}</dd>

                                    <dt>Class</dt>
                                    <dd>{doc.className()}</dd>

                                    <dt>Inheritance</dt>
                                    <dd>
                                        <ui:ListView items="{doc.inheritancePath()}" class="inheritance">
                                            <js:Template name="item">
                                                <a href="api/{item.id}">
                                                    {item.className()}
                                                </a>
                                            </js:Template>
                                        </ui:ListView>
                                    </dd>
                                    <dt visible="{doc.hasSee()}">See</dt>
                                    <dd visible="{doc.hasSee()}">
                                        <ui:ListView items="{doc.getSees()}">
                                            <js:Template name="item">
                                                <a href="api/{item.id}">
                                                    {item.className()}
                                                </a>
                                            </js:Template>
                                        </ui:ListView>
                                    </dd>
                                </dl>
                            </div>
                            <div class="span3">
                                <dl class="dl-horizontal">
                                    <dt>Dependencies</dt>
                                    <dd>
                                        <ui:ListView items="{doc.dependencies()}" class="dependencies">
                                            <js:Template name="item">
                                                <a href="api/{item.id}">
                                                    {item.className()}
                                                </a>
                                            </js:Template>
                                        </ui:ListView>
                                    </dd>
                                </dl>
                            </div>
                        </div>


                        <div class="row">
                            <div class="span7">
                                <h2>Methods</h2>
                                <blockquote>
                                    <p>
                                        A method is a piece of code that is called by name that is associated with an
                                        object.
                                    </p>
                                    <small>
                                        Andrew Edgecombe
                                    </small>
                                </blockquote>
                            </div>
                            <div class="span2">
                                <fieldset class="well">
                                    <label class="checkbox">
                                        <input type="checkbox" cid="showPublic" checked="checked"/>
                                        public
                                    </label>
                                    <label class="checkbox">
                                        <input type="checkbox" cid="showProtected"/>
                                        protected
                                    </label>
                                    <label class="checkbox">
                                        <input type="checkbox" cid="showInherit"/>
                                        inherit
                                    </label>
                                </fieldset>
                            </div>
                        </div>


                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Method</th>
                                    <th>Defined by</th>
                                </tr>
                            </thead>
                            <ui:ItemsView items="{doc.getMethods(showMethodTypes(),showInherit.checked)}"
                                          itemKey="method" tagName="tbody">
                                <js:Template name="item">
                                    <tr>
                                        <td>
                                            <strong>${method.name}(
                                                <ui:ItemsView items="${method.parameter}" itemKey="parameter"
                                                              class="parameter-list" tagName="span">
                                                    <js:Template name="item">
                                                        <span>
                                                            <span visible="${parameter.optional}">[</span>
                                                            ${parameter.name}
                                                            <span visible="${parameter.hasTypeDefinition()}">
                                                                :
                                                                <a href="api/${parameter.types[0]}">
                                                                    ${parameter.getFirstTypeName()}
                                                                </a>
                                                            </span>
                                                            <span visible="${parameter.optional}">
                                                                ]
                                                            </span>
                                                        </span>
                                                    </js:Template>
                                                </ui:ItemsView>
                                                )
                                                <span visible="${method.hasReturnType()}">
                                                    :
                                                    <a href="api/${method.returns.types[0]}">
                                                        ${method.getFirstReturnTypeName()}
                                                    </a>
                                                </span>
                                            </strong>
                                            <br/>
                                            ${method.description}
                                        </td>
                                        <td>
                                            <a href="api/${method.definedBy}">${method.definedBy}</a>
                                        </td>
                                    </tr>
                                </js:Template>
                            </ui:ItemsView>
                        </table>

                    </div>
                </div>
            </div>

        </div>
    </js:Content>
</module:DocumentationClass>