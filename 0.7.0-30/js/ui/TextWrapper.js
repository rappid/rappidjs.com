define(["js/ui/View"],function(e){var t=function(e){var t=[],n,r=[],i,s=0;for(var o=0;o<e.length;o++)i=e.charAt(o),i=="["&&r.length===0?(n={},n.start=o,r.push(o)):i=="|"?s=o:i=="]"&&r.length>0&&s>0&&(n.index=parseInt(e.substring(s+1,o)),n.end=o,n.text=e.substring(n.start+1,s),t.push(n),r.pop());return t};return e.inherit({defaults:{tagName:"span"},_getChildrenFromDescriptor:function(e){return[]},_renderChildren:function(){},_renderContentChildren:function(){},_renderString:function(e,n){for(var r=0;r<this.$el.childNodes.length;r++)this.$el.removeChild(this.$el.childNodes[r]);if(e){var i=t(e),s,o=-1;for(var u=0;u<i.length;u++){s=i[u],s.start>o&&this.$el.appendChild(this.$stage.$document.createTextNode(e.substring(o+1,s.start))),o=s.end,this.$viewMap||(this.$viewMap={});var a=s.index+":"+u,f=this.$viewMap[a];f||(f=this._createComponentForNode(this.$descriptor.childNodes[s.index]),f&&(f.$parentScope=this.$parentScope,f.$rootScope=this.$rootScope,this.$viewMap[a]=f)),f?(f.set("$text",s.text),f._initialize("auto",!0),f.isRendered()||f.render(),this.$children.push(f),this.$el.appendChild(f.$el)):this.$el.appendChild(this.$stage.$document.createTextNode(s.text))}o<e.length&&this.$el.appendChild(this.$stage.$document.createTextNode(e.substr(o+1)))}}})});