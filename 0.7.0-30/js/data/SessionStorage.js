define(["js/core/Component","inherit"],function(e,t){var n=e.inherit("js.data.SessionStorage",{ctor:function(){this.$implementation=null,this.callBase();if(this.runsInBrowser()){var e=this.$stage.$window,t=this.$stage.$document;e.sessionStorage?this.$implementation=e.sessionStorage:this.$implementation=new n.CookieImplementation(t)}else this.$implementation=new n.ObjectImplementation},getItem:function(e){return this.$implementation.getItem(e)},setItem:function(e,t){this.$implementation.setItem(e,t)},removeItem:function(e){this.$implementation.removeItem(e)},clear:function(){this.$implementation.clear()}});return n.CookieImplementation=t({getItem:function(e){return!e||!this.hasOwnProperty(e)?null:unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"))},key:function(e){return unescape(document.cookie.replace(/\s*=(?:.(?!;))*$/,"").split(/\s*=(?:[^;](?!;))*[^;]?;\s*/)[e])},setItem:function(e,t){if(!e)return;document.cookie=escape(e)+"="+escape(t)+"; path=/",this.length=document.cookie.match(/=/g).length},length:0,size:function(){this.$implementation.length=document.cookie.match(/=/g).length},removeItem:function(e){if(!e||!this.hasOwnProperty(e))return;document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--}}),n.ObjectImplementation=t({ctor:function(){this.clear()},getItem:function(e){return this.$storage[e]},setItem:function(e,t){this.$storage[e]=t},removeItem:function(e){delete this.$storage[e]},clear:function(){this.$storage={}}}),n});