define("json!doc/index.json",[],function(){return{packages:{rappid:{name:"rAppid.js",npm:"rAppid.js",description:"the core package of rAppid.js",link:"https://github.com/rappid/rAppid.js",exports:["js","srv"]},sprd:{name:"rAppid.js-sprd",npm:"rAppid.js-sprd",description:"Spreadshirt components and API adapter",link:"https://github.com/spreadshirt/rAppid.js-sprd",exports:["sprd"],dependencies:["rappid"]},piwik:{name:"rAppid.js piwik",npm:"rappidjs-piwik",description:"Piwik integration for rAppid.js",link:"https://github.com/rappid/rappidjs-piwik",exports:["piwik"],dependencies:["rappid"]},google:{name:"rappidjs-google",npm:"rappidjs-google",description:"Google Analytics integration for rAppid.js",link:"https://github.com/rappid/rappidjs-google",exports:["google"],dependencies:["rappid"]}},globals:["Array","Boolean","Date","Function","Iterator","Number","Object","RegExp","String"],externalDocumentation:{Array:"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array",Boolean:"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Boolean",Date:"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date",Function:"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function",Iterator:"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Iterator",Number:"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number",Object:"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object",RegExp:"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp",String:"https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String"}}}),define("js/data/validator/Validator",["js/core/Bindable","js/core/Base"],function(e,t){var n=function(){return!0},r=e.inherit("js.data.validator.Validator",{$validatorCache:{},defaults:{field:null,errorCode:"isInvalid",errorMessage:null,condition:null},ctor:function(){this.callBase();var e=this._generateCacheKey.apply(this,arguments);return e&&!this.$validatorCache[e]&&(this.$validatorCache[e]=this),this.$validatorCache[e]},_generateCacheKey:function(){return null},validate:function(e,r,i){function f(e,n){if(o){s.log("Validator returned twice. Ignore second return",t.LOGLEVEL.WARN);return}o=!0,i(e,n)}r instanceof Function&&(i=r,r={}),r=r||{};var s=this,o=!1,u=this.$.condition||n;if(!this._validationRequired(e)){f(null);return}try{f(null,this._validate(e))}catch(a){f(a)}},_validationRequired:function(e){return!(this.$.field&&!e.$[this.$.field]&&!e.schema[this.$.field].required)},_validate:function(e){throw new Error("abstract method _validate from Validator")},_getErrorMessage:function(){return this.$.field?(this.$.errorMessage||"Field '%' is invalid").replace("%",this.$.field):this.$.errorMessage||"Entity is invalid"},_createError:function(e,t,n){return new r.Error({code:e,message:t,field:n})},_createFieldError:function(e){return this._createError(this.$.errorCode,this._getErrorMessage(),e||this.$.field)}});return r.Error=e.inherit({}),r}),define("js/data/Entity",["require","js/core/Bindable","js/core/List","flow","js/data/validator/Validator","underscore"],function(e,t,n,r,i,s){var o,u=t.inherit("js.data.Entity.ValidationErrors",{firstError:function(){for(var e in this.$)if(this.$.hasOwnProperty(e)&&this.$[e])return this.$[e];return null}.on("change"),size:function(){return s.size(this.$)}.on("change")}),a=t.inherit("js.data.Entity",{ctor:function(e){this.$errors=new u,this.$entityInitialized=!1,this._extendSchema(),this.callBase()},schema:{},validators:[],idField:"id",createdField:!1,updatedField:!1,$context:null,$dependentObjectContext:null,$isEntity:!0,$isDependentObject:!0,_extendSchema:function(){if(this.factory.schema){this.schema=this.factory.schema;return}var t=this.base;while(t.factory.classof(a)){var n=t.schema;for(var r in n)n.hasOwnProperty(r)&&!this.schema.hasOwnProperty(r)&&(this.schema[r]=n[r]);t=t.base}var i={required:!0,includeInIndex:!1,serverOnly:!1,_rewritten:!0,compose:!1},o;this.idField&&!this.schema.hasOwnProperty(this.idField)&&(this.schema[this.idField]={type:String,required:!1,serverOnly:!1,includeInIndex:!0,generated:!0}),this.updatedField&&!this.schema.hasOwnProperty(this.updatedField)&&(this.schema[this.updatedField]={type:Date,required:!1,serverOnly:!1,includeInIndex:!0,generated:!0}),this.createdField&&!this.schema.hasOwnProperty(this.createdField)&&(this.schema[this.createdField]={type:Date,required:!1,includeInIndex:!0,serverOnly:!1,generated:!0});for(var u in this.schema)if(this.schema.hasOwnProperty(u)){o=this.schema[u];var f=s.isString(o);if(f||o instanceof Array||o instanceof Function)o={type:f?e(o.replace(/\./g,"/")):o},this.schema[u]=o;s.defaults(o,i),o._key=u}this.factory.schema=this.schema},getContextForChild:function(e){return this._isChildFactoryDependentObject(e)?(this.$dependentObjectContext||(this.$parentEntity?this.$dependentObjectContext=this.$parentEntity.$dependentObjectContext:this.$dependentObjectContext=this.$context.$dataSource.createContext(this)),this.$dependentObjectContext):this.$context.$dataSource.getContextForChild(e,this)},createEntity:function(e,t){var n=this.getContextForChild(e);return n.createEntity(e,t)},_isChildFactoryDependentObject:function(e){return e&&e.prototype.$isDependentObject},parse:function(e,t,n){return e},compose:function(e,t){return s.clone(this.$)},clearErrors:function(){this.$errors.clear(),this.trigger("isValidChanged",{},this)},errors:function(){return this.$errors}.on("isValidChanged"),fieldError:function(e){return this.$errors.$[e]}.on("isValidChanged"),isValid:function(){var e=this.$errors.$;for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}.on("isValidChanged"),validate:function(e,t){e instanceof Function&&(t=e,e={}),e=e||{},s.defaults(e,{setErrors:!0,reset:!0,fields:null});var n=this,o=[],u;for(var f=0;f<this.validators.length;f++)u=this.validators[f],e.fields&&e.fields.length>0?e.fields.indexOf(u.$.field)>-1&&o.push(u):o.push(u);var l=[];o.unshift(new a.SchemaValidator),r().parEach(o,function(t,r){t.validate(n,e,function(e,t){!e&&t&&(t instanceof i.Error?l.push(t):t instanceof Array&&(l=l.concat(t))),r(e)})}).exec(function(r){e.setErrors===!0&&n._setErrors(l,e),t&&t(r,l.length===0?null:l)})},_setError:function(e,t){e instanceof Object?this.$errors.set(e):this.$errors.set(e,t),this.trigger("isValidChanged")},_setErrors:function(e,t){if(t.fields&&t.fields.length){var n;for(var r=0;r<t.fields.length;r++)n=t.fields[r],this.$errors.unset(n)}else this.$errors.clear();var i;try{for(var s=0;s<e.length;s++)i=e[s],i.$.field&&!this.$errors.$.hasOwnProperty(i.$.field)?this.$errors.set(i.$.field,i):this.$errors.$.hasOwnProperty("_base")||this.$errors.set("_base",i)}catch(o){this.log(o,"warn")}this.trigger("isValidChanged")},error:function(e){return e?this.$errors.get(e):null},validateSubEntity:function(e,t){e instanceof a?e.validate(null,t):t("parameter is not an entity")},clone:function(){var e=this.callBase();return e.$context=this.$context,e.$parent=this.$parent,e},_cloneAttribute:function(e,t){if(e instanceof n){if(this.schema.hasOwnProperty(t)){var r=this.schema[t].type;if(r instanceof Array&&r.length&&r[0].classof&&r[0].classof(a)&&!r[0].prototype.$isEntity){var i=new n;return i._$source=e,i.add(e.$items),i}}}else if(e instanceof a&&!e.$isEntity)return e;return this.callBase()},init:function(e){e&&e()},identifier:function(){return this.$[this.idField]},contextModel:function(){return this.$context?this.$context.$contextModel:null}});return a.SchemaValidator=i.inherit("js.data.validator.SchemaValidator",{validate:function(e,t,i){t instanceof Function&&(i=t,t={}),t=t||{};var s=[],o=[],u=e.$,f=e.schema,l,c,h,p;try{for(var d in f)if(f.hasOwnProperty(d)){if(t.fields&&t.fields.length>0&&t.fields.indexOf(d)===-1)continue;c=u[d],l=f[d],h=l.type;if(this._isUndefined(c,l)&&this._isRequired(e,l))s.push(this._createError("isUndefinedError",d+" is required",d));else if(c&&!this._isValidType(c,l.type))s.push(this._createError("wrongTypeError",d+" is from wrong type",d));else if(c instanceof a)o.push({key:d,value:c});else if(c instanceof n&&!c.isCollection)if(c.size()>0&&c.at(0)instanceof a)for(var v=0;v<c.$items.length;v++)o.push({key:d,value:c.$items[v]});else c.size()===0&&(!this.runsInBrowser()||!l.generated)&&this._isRequired(e,l.required)===!0&&s.push(this._createError("isEmptyError",d+" are empty",d))}}catch(m){p=m||!0}var g=this;r().seq(function(){if(p)throw p}).seqEach(o,function(t,n){e.validateSubEntity(t.value,function(e,r){r&&s.push(g._createError("associationError",t.key+" is not valid",t.key)),n(e)})}).exec(function(e){i(e,s)})},_isValidType:function(e,t){return t===String&&!s.isString(e)?!1:t===Number&&!s.isNumber(e)?!1:t===Boolean&&!s.isBoolean(e)?!1:t!==Array||e instanceof n||e instanceof Array?t!==Date||e instanceof Date?!t.classof||!t.classof(a)||e instanceof t?t===Object&&!s.isObject(e)?!1:!0:!1:!1:!1},_isUndefined:function(e,t){var n=t.type;return n&&n.isCollection?!1:(!this.runsInBrowser()||!t.generated)&&(e===o||e===null||e==="")},_isRequired:function(e,t){if(t.type&&t.type.prototype&&t.type.prototype.isCollection)return!1;var n=t.required;return n instanceof Function?n.call(e):n}}),a}),define("js/data/Model",["js/data/Entity","js/core/List","flow","underscore"],function(e,t,n,r){function a(e,t,n){r.each(e,function(e,r){if(e instanceof u||e instanceof require("js/data/Collection")){var i=t[r];i&&(i.found=!0,n.push(function(t){e.fetch({fetchSubModels:i.subModels},t)}))}else e instanceof Object})}function f(e,t,i,s){var o=function(e,t){s&&s(e,t,i)};if(e)o(e,t);else{var f=[];if(i.fetchSubModels&&i.fetchSubModels.length>0){var l=u.createSubModelLoadingChain(t,i.fetchSubModels);a(t.$,l,f);var c=r.filter(l,function(e){return!e.found});if(c.length>0){this.log(["requested submodel missing",c],"warn"),o("requested submodel missing",t);return}}n().par(f).exec(function(e){o(e,t)})}}var i={CREATED:0,LOADING:1,LOADED:2,ERROR:-1},s={CREATED:0,SAVING:1},o={NEW:0,CREATED:1,DELETED:-1},u=e.inherit("js.data.Model",{ctor:function(e){this._fetch={callbacks:[],state:i.CREATED},this._save={callbacks:[],state:s.CREATED},this.callBase(e)},schema:{href:{type:String,generated:!0,required:!1,includeInIndex:!0}},hrefField:"href",updatedField:"updated",createdField:"created",$isEntity:!1,$isDependentObject:!1,save:function(e,t){e=e||{},r.defaults(e,{invalidatePageCache:!1});if(this._save.state===s.SAVING)t&&this._save.callbacks.push(t);else{this._save.state=s.SAVING;var n=this;try{var i=this._status();if(i!==o.NEW&&i!==o.CREATED)throw new Error("status '"+i+"' doesn't allow save");this.$context.$dataSource.saveModel(this,e,function(i){n._save.state=i?s.ERROR:s.CREATED,!i&&n.$collection&&e.invalidatePageCache&&n.$collection.invalidatePageCache(),t&&t(i,n,e),r.each(n._save.callbacks,function(e){e.call(n,i,n)}),n._save.callbacks=[]})}catch(u){n._save.state=s.ERROR,t&&t(u),r.each(n._save.callbacks,function(e){e.call(n,err,n)}),n._save.callbacks=[]}}},validateAndSave:function(e,t){var r=this;n().seq(function(t){r.validate(e,t)}).seq(function(t){r.isValid()?r.save(e,t):t("Model is not valid!")}).exec(function(e){t&&t(e,r)})},getCollection:function(e){var t=this.schema[e];if(!t)throw"Couldn't find '"+e+"' in schema";var n=this.get(e);if(!n){var r=this.getContextForChild(t.type);if(!r)throw"Couldn't determine context for "+e;n=r.createCollection(t.type,null),n.$parent=this,this.set(e,n)}return n},compose:function(e,t){var n=this.callBase();return e==="create"&&n.hasOwnProperty(this.idField)&&[this.idField]===null&&delete n[this.idField],n},fetch:function(e,t){arguments.length===1&&e instanceof Function&&(t=e,e=null),e=e||{};var n=this;this._fetch.state===i.LOADING?this._fetch.callbacks.push(function(n,r){f(n,r,e,t)}):this._fetch.state==i.LOADED&&!e.noCache?f(null,this,e,t):(n._fetch.state=i.LOADING,this.$context.$dataSource.loadModel(this,e,function(s,o){n._fetch.state=s?i.ERROR:i.LOADED,f.call(n,s,o,e,t),r.each(n._fetch.callbacks,function(e){e.call(n,s,o)})}))},remove:function(e,t){try{var n=this._status(),r=this;if(n!==o.CREATED)throw new Error("status '"+n+"' doesn't allow delete");this.$context.$dataSource.removeModel(this,e,function(e){e||(r.set("id",!1),r.$collection&&r.$collection.remove(r)),t&&t(e)})}catch(i){t&&t(i)}},validateSubEntity:function(e,t){e instanceof u?t():this.callBase()},_status:function(){return this.identifier()===!1?o.DELETED:this.identifier()?o.CREATED:o.NEW}.on("change"),isNew:function(){return this._status()===o.NEW}.on("change"),isCreated:function(){return this._status()===o.CREATED}.on("change"),convertIdentifier:function(e){var t=this.idField;if(this.schema.hasOwnProperty(t)){var n=this.schema[t];if(n.type&&n.type===Number)return parseInt(e)}return e}});return u.createSubModelLoadingChain=function(e,t){var n={};return r.each(t,function(e){if(e){var t=e.split("/"),r=t.shift(),i=n[r]||{};n[r]=i,i.found=!1,i.type=r,i.subModels=[]||i.subModels,t.length>0&&i.subModels.push(t.join("/"))}}),n},u.STATE=o,u.FETCHSTATE=i,u}),define("documentation/entity/Parameter",["js/data/Entity"],function(e){return e.inherit("documentation.entity.Parameter",{hasTypeDefinition:function(){return!!(this.$.types&&this.$.types.length>0)},getFirstTypeName:function(){return(this.get("types[0]")||"").split(".").pop()},isOptional:function(){return this.$.optional===!0}})}),define("documentation/entity/Method",["js/data/Entity","documentation/entity/Parameter"],function(e,t){return e.inherit("documentation.entity.Method",{schema:{parameter:[t]},hasReturnType:function(){return!!this.get("returns.types[0]")},getFirstReturnTypeName:function(){return(this.get("returns.types[0]")||"").split(".").pop()}})}),define("documentation/entity/Attribute",["js/data/Entity","underscore"],function(e,t){return e.inherit("documentation.entity.Attribute",{schema:{name:String,value:String,defaultType:String,visibility:String},value:function(){return t.isArray(this.$.value)?this.$.value.toString():t.isString(this.$.value)?'"'+this.$.value+'"':String(this.$.value)}})}),define("documentation/model/Class",["js/data/Model","documentation/entity/Method","underscore","documentation/entity/Attribute","json!doc/index.json"],function(e,t,n,r,i){var s=/^_/,o="https://github.com/rappid/rAppid.js/blob/master",u="https://github.com/joyent/node/tree/master/lib",a={underscore:"js/lib/underscore",flow:"js/lib/flow",inherit:"js/lib/inherit",parser:"js/lib/parser"},f={underscore:"http://http://underscorejs.org/",flow:"https://github.com/it-ony/flow.js",require:"http://requirejs.org/",inherit:"https://github.com/it-ony/inherit.js"},l=e.inherit("documentation.model.Class",{schema:{methods:[t],staticMethods:[t],defaults:Object,properties:Object},packageName:function(){var e=this.$.id.split(".");return e.pop(),e.join(".")},className:function(){return/[A-Z]/.test(this.$.id)?this.$.id.replace(/^[a-z\.]+/,""):this.$.id},fileExtension:function(){return"."+this.$.type}.onChange("type"),fileName:function(){var e=this.getPath();return this.isNodeModule(e)?e:this.$.file}.onChange("id","fileExtension()"),fileLink:function(){var e=this.getPath();if(/^http/.test(e))return e;var t=this.getPackageName();if(t){var n=i.packages[t].link;if(n&&/github/.test(n))return n+"/blob/master/"+e.replace(/\./g,"/")+this.fileExtension()}return this.isNodeModule(e)?u+"/"+e+".js":o+"/"+e.replace(/\./g,"/")+this.fileExtension()}.onChange("id","fileExtension()"),isNodeModule:function(e){return e.indexOf(".")===-1&&e.indexOf("/")===-1},getPath:function(){var e=this.$.id;return a[e]||e},getPackageName:function(){var e=(this.$.package||"").split(".").shift()||this.$.id.split(".").shift(),t=i.packages;for(var r in t)if(t.hasOwnProperty(r)&&n.indexOf(t[r].exports||[],e)!==-1)return r;return null},documentationLink:function(){var e=this.getPath();if(f.hasOwnProperty(this.$.id))return f[this.$.id];var t=this.getPackageName();return t?t==="rappid"?"api/"+this.$.id:"api/"+t+"/"+this.$.id:this.isNodeModule(e)?"http://nodejs.org/api/"+e+".html":"api/"+this.$.id}.onChange("id"),hasSee:function(){return!!(this.$.see&&this.$.see.length>0)},getSees:function(){var e=[],t=this;return this.$.see&&n.each(this.$.see,function(n){e.push(t.$context.createEntity(l,n))}),e},inheritancePath:function(){var e=[],t=this.$.inheritancePath;if(t)for(var n=0;n<t.length;n++)e.push(this.$context.createEntity(l,t[n]));return e}.onChange("inheritancePath"),dependencies:function(){var e=[],t=this.$.dependencies;if(t)for(var n=0;n<t.length;n++)e.push(this.$context.createEntity(l,t[n]));return e}.onChange("dependencies"),getDefaults:function(e,t){var n=[],i,s;for(var o in this.$.defaults)if(this.$.defaults.hasOwnProperty(o)){s=this.$.defaults[o];if(e==="all"||e===s.visibility)if(t||!t&&!s.hasOwnProperty("definedBy"))i=this.$context.createEntity(r,o),i.set(this.$.defaults[o]),n.push(i)}return n=n.sort(function(e,t){return e.$.name>t.$.name?1:-1}),n},getProperties:function(e,t){e=e||"all";var n=[],i,s;for(var o in this.$.properties)if(this.$.properties.hasOwnProperty(o)){s=this.$.properties[o];if(e==="all"||e===s.visibility)if(t||!t&&!s.hasOwnProperty("definedBy"))i=this.$context.createEntity(r,o),i.set(this.$.properties[o]),n.push(i)}return n=n.sort(function(e,t){return e.$.name>t.$.name?1:-1}),n},getMethods:function(e,t){var n=[],r=null;return this.$.methods.each(function(i){if(e==="all"||e===i.$.visibility)if(t||!t&&!i.$.hasOwnProperty("definedBy"))i.$.name==="ctor"?r=i:n.push(i)}),n.sort(function(e,t){return e=(e.$.name||"").replace(s,""),t=(t.$.name||"").replace(s,""),e>t?1:-1}),r&&n.unshift(r),n},getStaticMethods:function(e){var t=[];return this.$.staticMethods.each(function(n){(e==="all"||e===n.$.visibility)&&t.push(n)}),t.sort(function(e,t){return e=(e.$.name||"").replace(s,""),t=(t.$.name||"").replace(s,""),e>t?1:-1}),t}});return l}),define("js/data/Query",["Query"],function(e){var t=e.inherit("js.data.Query",{ctor:e,hasSortExpressions:function(){return this.query&&this.query.sort&&this.query.sort.length>0}});return t.query=function(){return new t},t.Where=e.Where,t.Comparator=e.Comparator,t}),define("js/data/Collection",["require","js/core/List","js/data/Model","flow","underscore","js/data/Query"],function(e,t,n,r,i,s){var o={CREATED:0,LOADING:1,LOADED:2,ERROR:-1},u={UNKNOWN:0,COUNTING:1,COUNTED:-1},a=t.inherit("js.data.Collection",{$modelFactory:n,isCollection:!0,ctor:function(t,n){n=n||{},i.defaults(n,{root:null,query:null,pageSize:null,queryParameters:{},sortParameters:null,factory:this.$modelFactory||e("js/data/Model"),type:null}),this.$filterCache={},this.$sortCache={},this._count={callbacks:[],state:u.UNKNOWN},n.root&&(i.defaults(n,n.root.options),this.$modelFactory=n.root.$modelFactory),this.callBase(t,n),this.$pageCache=[]},filter:function(e){var t=this.getRoot();if(e instanceof s){var n=i.defaults({},{query:e,root:t},t.$),r=e.whereCacheId(),o=t.$filterCache;if(r)return o[r]||(o[r]=this._createFilteredCollection(e,n)),o[r]}return t},_createFilteredCollection:function(e,t){t.$itemsCount=undefined;var n=new this.factory(null,t);return n.$context=this.$context,n},_createSortedCollection:function(e,t){var n=new this.factory(null,t);return n.$context=this.$context,n},sort:function(e){if(e instanceof s&&e.query.sort){this.$.query&&(e.query.where=this.$.query.query.where);var t=i.defaults({},{query:e,root:this.getRoot()},this.$),n=e.sortCacheId();return this.$sortCache[n]||(this.$sortCache[n]=this._createSortedCollection(e,t)),this.$sortCache[n]}return this},query:function(e){return this.filter(e).sort(e)},getRoot:function(){return this.$.root||this},fetch:function(e,t){e instanceof Function&&(t=e,e=null),e=e||{};var n=this;if(e.limit||e.offset){var i=new f(null,this,0);i.fetch(e,function(n){!n&&!i.itemsInsertedIntoCollection&&(i.itemsInsertedIntoCollection=!0),t&&t(n,i,e)})}else{function s(i){function o(t){s.push(function(r){n.fetchPage(t,e,r)})}var s=[];for(var u=0;u<i;u++)o(u);r().par(s).exec(function(e){t&&t(e,n)})}if(!this.$.pageSize)this.fetchPage(0,e,t);else{var o=this.pageCount();isNaN(o)?this.fetchPage(0,e,function(e){e?t&&t(e,n):(o=n.pageCount(),isNaN(o)?t&&t("Count for collection couldn't be fetched.",n):s(o))}):s(o)}}},pageCount:function(){return this.$.hasOwnProperty("$itemsCount")?Math.ceil(this.$.$itemsCount/this.$.pageSize):NaN},getContextForChild:function(e){return this.$context},parse:function(e){return e},createItem:function(e){var t=this.getContextForChild(this.$modelFactory).createEntity(this.$modelFactory,e);return t.$parent=this.$parent,t.$collection=this,t},fetchPage:function(e,t,n){if(e<0)throw"pageIndex must be >= 0";var r=this.$pageCache[e];r||(r=this.$pageCache[e]=new f(null,this,e));var s=this;t=i.extend(this.$,t),r.fetch(t,function(r,i){!r&&!i.itemsInsertedIntoCollection&&(i.itemsInsertedIntoCollection=!0,s.add(i.$items,{index:(e||0)*s.$.pageSize})),n&&n(r,i,t)})},count:function(e,t){var n=this;this.$context.$dataSource.countCollection(this,e,function(e,r){e||n.set("$itemsCount",r),t&&t(e,r)})},invalidatePageCache:function(){this.$pageCache={};for(var e in this.$filterCache)this.$filterCache.hasOwnProperty(e)&&this.$filterCache[e].invalidatePageCache();for(e in this.$sortCache)this.$sortCache.hasOwnProperty(e)&&this.$sortCache[e].invalidatePageCache();this.set("$itemsCount",NaN,{silent:!0}),this.reset([])},size:function(){return this.$.$itemsCount}.onChange("$itemsCount"),isEmpty:function(){var e=this.pageCount();return isNaN(e)?!1:e===0}.onChange("$itemsCount"),getQueryParameters:function(e){return this.$.queryParameters},getSortParameters:function(e){return this.$.sortParameters},destroy:function(){this.callBase()}}),f=a.Page=t.inherit({ctor:function(e,t,n){if(!t.$.pageSize&&n!==0)throw"Cannot create page for index '"+n+"' with pageSize '"+t.options.pageSize+"'";var r=t.$;r.pageSize&&(this.$offset=n*r.pageSize,this.$limit=r.pageSize),this.$pageIndex=n,this.$collection=t,this.callBase(e),this._fetch={callbacks:[],state:o.CREATED}},setMetaData:function(e){this.$metaData=e,e&&e.hasOwnProperty("count")&&this.$collection.set("$itemsCount",e.count)},parse:function(e,t){return this.getRoot().parse(e,t)},getRoot:function(){return this.$collection.getRoot()},getCollection:function(){return this.$collection},fetch:function(e,t){function s(t,n,i){var s=function(t,n){i&&i(t,n,e)};e.fetchModels||e.fetchSubModels?r().parEach(n.$items,function(t,n){t.fetch({fetchSubModels:e.fetchSubModels},n)}).exec(function(e){s(e,n)}):s(t,n)}e=e||{};if(e.limit||e.offset)this.$offset=e.offset||0,this.$limit=e.limit||this.$limit;var n=this;this._fetch.state===o.LOADING?this._fetch.callbacks.push(function(e,n){s(e,n,t)}):this._fetch.state==o.LOADED?s(null,this,t):(n._fetch.state=o.LOADING,this.$collection.$context.$dataSource.loadCollectionPage(this,e,function(e,r){n._fetch.state=e?o.ERROR:o.LOADED,s(e,r,t),i.each(n._fetch.callbacks,function(t){t(e,r)})}))}});return a.of=function(e){if(e instanceof Function)return a.inherit(a.prototype.constructor.name+"["+e.prototype.constructor.name+"]",{$modelFactory:e});throw"Cannot create Collection of '"+e+"'."},a}),define("documentation/model/Package",["js/data/Model","documentation/model/Class","js/data/Collection"],function(e,t,n){return e.inherit("documentation.model.Package",{schema:{name:String,description:String,classes:n.of(t),firstClass:String},firstClass:function(){return this.$.firstClass||this.get("classes[0].id")}.onChange("firstClass"),id:function(){return this.$.id==="rappid"?"":this.$.id}})}),define("js/ui/tree/TreeNode",["js/core/Bindable","js/core/List"],function(e,t){return e.inherit("js.ui.tree.TreeNode",{defaults:{data:null,expandable:!0,isLeaf:!1,expanded:!1,parentNode:null,childNodes:t},expand:function(){this.set("expanded",!0)},collapse:function(){this.set("expanded",!1)},toggle:function(){this.set("expanded",!this.$.expanded)},addChild:function(e,t){this.$.childNodes.add(e,t),e.set("parentNode",this)},getChildNodeAt:function(e){return this.$.childNodes.at(e)},removeChild:function(e,t){this.$.childNodes.remove(e,t),e.set("parentNode",null)},clear:function(){this.$.childNodes.reset([])}})}),define("app/module/DocumentationClass",["js/core/Module","json!doc/index.json","js/core/List","documentation/model/Class","documentation/model/Package","underscore","js/core/Bindable","js/ui/tree/TreeNode","flow"],function(e,t,n,r,i,s,o,u,a){var f={};return e.inherit("app.module.DocumentationClass",{defaults:{classes:n,packages:n,packageTree:null,doc:null,searchString:"",externalDocumentationSrc:null,currentView:null,module:null,moduleView:null,documentationView:null,externalDocumentationView:null,selectedNode:null},_isCurrentView:function(e){return this.$.currentView===e}.onChange("currentView"),showTypes:function(e,t){var n=(e?2:0)+(t?1:0);return["","protected","public","all"][n]},_insertInPackageTree:function(e,t,n){if(e.length>0){var r=e[0];if(/^[a-z]/.test(r)){var i=t[r];i||(i={},t[r]=i),e.shift(),this._insertInPackageTree(e,i,n)}else t.children||(t.children=[]),t.children.push({element:n,name:e.join(".")})}},_buildTree:function(e,t){var n;for(var r in e)e.hasOwnProperty(r)&&r!="children"&&(n=new u({data:new o({id:r})}),t.addChild(n),this._buildTree(e[r],n));if(e.children){var i;for(var s=0;s<e.children.length;s++)t.addChild(new u({isLeaf:!0,data:e.children[s].element}))}},_initializationComplete:function(){if(!this.runsInBrowser()){var e={checked:!0};this.$.showPublic.set(e),this.$.showProtected.set(e),this.$.showPublicStatic.set(e),this.$.showProtectedStatic.set(e),this.$.publicAttributesCheckbox.set(e),this.$.protectedAttributesCheckbox.set(e)}this.callBase()},initialize:function(){this.set("filterDocs",function(e,t,n){return!n.$.searchString||e.$.id.toLowerCase().indexOf(n.$.searchString.toLowerCase())>-1})},hasCurrentDocumentation:function(){return!!this.$.doc}.onChange("doc"),hasSection:function(e){var t=this.$.doc;if(e&&t&&t.$.hasOwnProperty(e)){var r=t.$[e];if(r instanceof n)return r.size()>0;if(s.isObject(r))return s.keys(r)>0;if(s.isArray(r))return r.length>0}return!1}.onChange("doc"),labelForNode:function(e){return e.$.isLeaf?e.get("data").className():e.get("data.id")},hrefForNode:function(e){return e.$.isLeaf?"api/"+e.get("data").$context.$contextModel.$.id+"/"+e.get("data.id"):null},iconClassForNode:function(e,t){return e.$.isLeaf?"file":t?"folder-open":"folder-close"},title:function(e){return(e?e+" - ":"")+"API Reference - rAppid.js"},loadedInIFrame:function(e){clearTimeout(this.$iFrameTimeout)},defaultRoute:function(e){this.showClass(e)}.async(),_showExternalDocumentation:function(e){var t;s.isString(e)?t=e:t=e.url,this.set({externalDocumentationSrc:t,currentView:this.$.externalDocumentationView}),this.runsInBrowser()&&(this.$iFrameTimeout=setTimeout(function(){window.location=t},3e3))},showClass:function(e,n,r){var o=this;t.externalDocumentation=t.externalDocumentation||{};if(!n&&t.externalDocumentation.hasOwnProperty(r))this._showExternalDocumentation(t.externalDocumentation[r]),e.callback();else{!n&&!/\./.test(r)&&(n=r,r=null);var l=n=n||"rappid";n=t.packages[n];if(!n){var c="Module not found";console.log(c),e.callback(c);return}var h=[];a().seq("module",function(e){var t=o.$.api.createEntity(i,l);s.defaults(t.$,n),h.push(t),t.fetch(null,e)}).seq(function(e){a().seqEach(this.vars.module.$.dependencies,function(e,t){var n=o.$.api.createEntity(i,e);s.defaults(n.$,e),h.push(n),n.fetch(null,t)}).exec(e)}).seq(function(){var e,t={},n;for(var r=0;r<h.length;r++){var i=h[r];f[i.$.id]?n=f[i.$.id]:(i.$.classes.each(function(n){e=n.$.id.split("."),o._insertInPackageTree(e,t,n)}),n=new u({isRoot:!0,expanded:!0}),o._buildTree(t,n),f[i.$.id]=n)}o.set("packageTree",n)}).seq("doc",function(e){r?this.vars.module.$.classes.createItem(r).fetch(null,e):e()}).exec(function(t,n){if(!t)if(n.doc){var r=o.$.packageTree,i=n.doc.$.package.split("."),s;while(i.length)s=i.shift(),r.$.childNodes.each(function(e){e.$.data.$.id===s&&(r=e,this["break"]())});r&&r.$.childNodes.each(function(e){e.$.data===n.doc&&(r=e,this["break"]())}),o.set({selectedNode:r,doc:n.doc,currentView:o.$.documentationView})}else o.set({doc:null,module:n.module,currentView:o.$.moduleView});o.runsInBrowser()?window.scrollTo(window.scrollX,0):console.error(t),e.callback(t)})}}.async(),getDocumentationLink:function(e){if(!e)return null;var n=e.split(".").shift(),r=t.packages;for(var i in r)if(r.hasOwnProperty(i)&&s.indexOf(r[i].exports||[],n)!==-1)break;return i?i==="rappid"?"api/"+e:"api/"+i+"/"+e:this.isNodeModule(path)?"http://nodejs.org/api/"+path+".html":"api/"+e},isMethodVisible:function(e,t,n){if(e.$.name==="ctor")return!1;if(t==="all"||t===e.$.visibility)if(n||!n&&!e.$.hasOwnProperty("definedBy"))return!0;return!1}})}),define("moment",function(){return function(e){function t(e,t,n,r){var i=n.lang();return i[e].call?i[e](n,r):i[e][t]}function n(e,t){return function(n){return u(e.call(this,n),t)}}function r(e){return function(t){var n=e.call(this,t);return n+this.lang().ordinal(n)}}function i(e,t,n){this._d=e,this._isUTC=!!t,this._a=e._a||null,this._lang=n||!1}function s(e){var t=this._data={},n=e.years||e.y||0,r=e.months||e.M||0,i=e.weeks||e.w||0,s=e.days||e.d||0,u=e.hours||e.h||0,a=e.minutes||e.m||0,f=e.seconds||e.s||0,l=e.milliseconds||e.ms||0;this._milliseconds=l+f*1e3+a*6e4+u*36e5,this._days=s+i*7,this._months=r+n*12,t.milliseconds=l%1e3,f+=o(l/1e3),t.seconds=f%60,a+=o(f/60),t.minutes=a%60,u+=o(a/60),t.hours=u%24,s+=o(u/24),s+=i*7,t.days=s%30,r+=o(s/30),t.months=r%12,n+=o(r/12),t.years=n,this._lang=!1}function o(e){return e<0?Math.ceil(e):Math.floor(e)}function u(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function a(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function f(e){return Object.prototype.toString.call(e)==="[object Array]"}function l(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function c(e,t,n,r){var i,s,o=[];for(i=0;i<7;i++)o[i]=e[i]=e[i]==null?i===2?1:0:e[i];return e[7]=o[7]=t,e[8]!=null&&(o[8]=e[8]),e[3]+=n||0,e[4]+=r||0,s=new Date(0),t?(s.setUTCFullYear(e[0],e[1],e[2]),s.setUTCHours(e[3],e[4],e[5],e[6])):(s.setFullYear(e[0],e[1],e[2]),s.setHours(e[3],e[4],e[5],e[6])),s._a=o,s}function h(e,t){var n,r,i=[];!t&&D&&(t=require("./lang/"+e));for(n=0;n<P.length;n++)t[P[n]]=t[P[n]]||M.en[P[n]];for(n=0;n<12;n++)r=k([2e3,n]),i[n]=new RegExp("^"+(t.months[n]||t.months(r,""))+"|^"+(t.monthsShort[n]||t.monthsShort(r,"")).replace(".",""),"i");return t.monthsParse=t.monthsParse||i,M[e]=t,t}function p(e){var t=typeof e=="string"&&e||e&&e._lang||null;return t?M[t]||h(t):k}function d(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function v(e){var t=e.match(B),n,r;for(n=0,r=t.length;n<r;n++)tt[t[n]]?t[n]=tt[t[n]]:t[n]=d(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=typeof t[n].call=="function"?t[n].call(i,e):t[n];return s}}function m(e,t){function n(t){return e.lang().longDateFormat[t]||t}var r=5;while(r--&&j.test(t))t=t.replace(j,n);return Y[t]||(Y[t]=v(t)),Y[t](e)}function g(e){switch(e){case"DDDD":return R;case"YYYY":return U;case"S":case"SS":case"SSS":case"DDD":return q;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return z;case"Z":case"ZZ":return W;case"T":return X;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return I;default:return new RegExp(e.replace("\\",""))}}function y(e,t,n,r){var i,s;switch(e){case"M":case"MM":n[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":for(i=0;i<12;i++)if(p().monthsParse[i].test(t)){n[1]=i,s=!0;break}s||(n[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(n[2]=~~t);break;case"YY":n[0]=~~t+(~~t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":r.isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(("0."+t)*1e3);break;case"Z":case"ZZ":r.isUTC=!0,i=(t+"").match(K),i&&i[1]&&(r.tzh=~~i[1]),i&&i[2]&&(r.tzm=~~i[2]),i&&i[0]==="+"&&(r.tzh=-r.tzh,r.tzm=-r.tzm)}t==null&&(n[8]=!1)}function b(e,t){var n=[0,0,1,0,0,0,0],r={tzh:0,tzm:0},i=t.match(B),s,o;for(s=0;s<i.length;s++)o=(g(i[s]).exec(e)||[])[0],o&&(e=e.slice(e.indexOf(o)+o.length)),tt[i[s]]&&y(i[s],o,n,r);return r.isPm&&n[3]<12&&(n[3]+=12),r.isPm===!1&&n[3]===12&&(n[3]=0),c(n,r.isUTC,r.tzh,r.tzm)}function w(e,t){var n,r=e.match(F)||[],s,o=99,u,a,f;for(u=0;u<t.length;u++)a=b(e,t[u]),s=m(new i(a),t[u]).match(F)||[],f=l(r,s),f<o&&(o=f,n=a);return n}function E(e){var t="YYYY-MM-DDT",n;if(V.exec(e)){for(n=0;n<4;n++)if(J[n][1].exec(e)){t+=J[n][0];break}return W.exec(e)?b(e,t+" Z"):b(e,t)}return new Date(e)}function S(e,t,n,r,i){var s=i.relativeTime[e];return typeof s=="function"?s(t||1,!!n,e,r):s.replace(/%d/i,t||1)}function x(e,t,n){var r=A(Math.abs(e)/1e3),i=A(r/60),s=A(i/60),o=A(s/24),u=A(o/365),a=r<45&&["s",r]||i===1&&["m"]||i<45&&["mm",i]||s===1&&["h"]||s<22&&["hh",s]||o===1&&["d"]||o<=25&&["dd",o]||o<=45&&["M"]||o<345&&["MM",A(o/30)]||u===1&&["y"]||["yy",u];return a[2]=t,a[3]=e>0,a[4]=n,S.apply({},a)}function T(e,t){k.fn[e]=function(e){var n=this._isUTC?"UTC":"";return e!=null?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function N(e){k.duration.fn[e]=function(){return this._data[e]}}function C(e,t){k.duration.fn["as"+e]=function(){return+this/t}}var k,L="1.7.2",A=Math.round,O,M={},_="en",D=typeof module!="undefined"&&module.exports,P="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),H=/^\/?Date\((\-?\d+)/i,B=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,F=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,I=/\d\d?/,q=/\d{1,3}/,R=/\d{3}/,U=/\d{1,4}/,z=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,W=/Z|[\+\-]\d\d:?\d\d/i,X=/T/i,V=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,$="YYYY-MM-DDTHH:mm:ssZ",J=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],K=/([\+\-]|\d\d)/gi,Q="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),G={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Y={},Z="DDD w M D d".split(" "),et="M D H h m s w".split(" "),tt={M:function(){return this.month()+1},MMM:function(e){return t("monthsShort",this.month(),this,e)},MMMM:function(e){return t("months",this.month(),this,e)},D:function(){return this.date()},DDD:function(){var e=new Date(this.year(),this.month(),this.date()),t=new Date(this.year(),0,1);return~~((e-t)/864e5+1.5)},d:function(){return this.day()},dd:function(e){return t("weekdaysMin",this.day(),this,e)},ddd:function(e){return t("weekdaysShort",this.day(),this,e)},dddd:function(e){return t("weekdays",this.day(),this,e)},w:function(){var e=new Date(this.year(),this.month(),this.date()-this.day()+5),t=new Date(e.getFullYear(),0,4);return~~((e-t)/864e5/7+1.5)},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return u(~~(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+u(~~(e/60),2)+":"+u(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+u(~~(10*e/6),4)}};while(Z.length)O=Z.pop(),tt[O+"o"]=r(tt[O]);while(et.length)O=et.pop(),tt[O+O]=n(tt[O],2);tt.DDDD=n(tt.DDD,3),k=function(t,n){if(t===null||t==="")return null;var r,s;return k.isMoment(t)?new i(new Date(+t._d),t._isUTC,t._lang):(n?f(n)?r=w(t,n):r=b(t,n):(s=H.exec(t),r=t===e?new Date:s?new Date(+s[1]):t instanceof Date?t:f(t)?c(t):typeof t=="string"?E(t):new Date(t)),new i(r))},k.utc=function(e,t){return f(e)?new i(c(e,!0),!0):(typeof e=="string"&&!W.exec(e)&&(e+=" +0000",t&&(t+=" Z")),k(e,t).utc())},k.unix=function(e){return k(e*1e3)},k.duration=function(e,t){var n=k.isDuration(e),r=typeof e=="number",i=n?e._data:r?{}:e,o;return r&&(t?i[t]=e:i.milliseconds=e),o=new s(i),n&&(o._lang=e._lang),o},k.humanizeDuration=function(e,t,n){return k.duration(e,t===!0?null:t).humanize(t===!0?!0:n)},k.version=L,k.defaultFormat=$,k.lang=function(e,t){var n;if(!e)return _;(t||!M[e])&&h(e,t);if(M[e]){for(n=0;n<P.length;n++)k[P[n]]=M[e][P[n]];k.monthsParse=M[e].monthsParse,_=e}},k.langData=p,k.isMoment=function(e){return e instanceof i},k.isDuration=function(e){return e instanceof s},k.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}}),k.fn=i.prototype={clone:function(){return k(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?this._a[8]!=null?!!this._a[8]:!l(this._a,(this._a[7]?k.utc(this._a):k(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return m(this,e?e:k.defaultFormat)},add:function(e,t){var n=t?k.duration(+t,e):k.duration(e);return a(this,n,1),this},subtract:function(e,t){var n=t?k.duration(+t,e):k.duration(e);return a(this,n,-1),this},diff:function(e,t,n){var r=this._isUTC?k(e).utc():k(e).local(),i=(this.zone()-r.zone())*6e4,s=this._d-r._d-i,o=this.year()-r.year(),u=this.month()-r.month(),a=this.date()-r.date(),f;return t==="months"?f=o*12+u+a/30:t==="years"?f=o+(u+a/30)/12:f=t==="seconds"?s/1e3:t==="minutes"?s/6e4:t==="hours"?s/36e5:t==="days"?s/864e5:t==="weeks"?s/6048e5:s,n?f:A(f)},from:function(e,t){return k.duration(this.diff(e)).lang(this._lang).humanize(!t)},fromNow:function(e){return this.from(k(),e)},calendar:function(){var e=this.diff(k().sod(),"days",!0),t=this.lang().calendar,n=t.sameElse,r=e<-6?n:e<-1?t.lastWeek:e<0?t.lastDay:e<1?t.sameDay:e<2?t.nextDay:e<7?t.nextWeek:n;return this.format(typeof r=="function"?r.apply(this):r)},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<k([this.year()]).zone()||this.zone()<k([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},startOf:function(e){switch(e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return k.utc([this.year(),this.month()+1,0]).date()},lang:function(t){return t===e?p(this):(this._lang=t,this)}};for(O=0;O<Q.length;O++)T(Q[O].toLowerCase(),Q[O]);T("year","FullYear"),k.duration.fn=s.prototype={weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,n=this.lang().relativeTime,r=x(t,!e,this.lang()),i=t<=0?n.past:n.future;return e&&(typeof i=="function"?r=i(r):r=i.replace(/%s/i,r)),r},lang:k.fn.lang};for(O in G)G.hasOwnProperty(O)&&(C(O,G[O]),N(O.toLowerCase()));C("Weeks",6048e5),D&&(module.exports=k),typeof ender=="undefined"&&(this.moment=k),typeof define=="function"&&define.amd&&define("moment",[],function(){return k})}.call(this),moment}),define("js/conf/ResourceConfiguration",["js/conf/Configuration","js/data/Model"],function(e,t){return e.inherit("js.conf.ResourceConfiguration",{defaults:{resourceHandler:null,modelClassName:null,path:null,collectionClassName:null,processor:null},_initializationComplete:function(){this._validateConfiguration(),this.callBase()},_validateConfiguration:function(){if(!this.$.modelClassName)throw"no modelClassName defined for '"+this.$.path+"'."},getConfigurationForModelClassName:function(e){return this.getConfigurationByKeyValue("modelClassName",e)},getConfigurationForModelClass:function(e){var n;while(!n&&e&&e.classof&&e.classof(t))n=this.getConfigurationForModelClassName(e.prototype.constructor.name),e=e.prototype.base;return n},getConfigurationForPath:function(e){return this.getConfigurationByKeyValue("path",e,!1)}})}),define("js/conf/DataSourceConfiguration",["js/conf/ResourceConfiguration"],function(e){return e.inherit("js.conf.DataSourceConfiguration",{_validateConfiguration:function(){}})}),define("js/data/TypeResolver",["js/core/Base"],function(e){return e.inherit("js.data.TypeResolver",{resolve:function(e,t){return null}})}),define("js/data/DataSource",["js/core/Component","js/core/Base","js/data/Collection","underscore","js/data/Model","js/data/Entity","js/core/List","flow","JSON","moment","js/conf/DataSourceConfiguration","js/conf/ResourceConfiguration","js/data/TypeResolver"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p,d=t.inherit("js.data.DataSource.Context",{defaults:{collectionPageSize:null},ctor:function(e,t,n,r){this.callBase(),this.$contextModel=t,this.$contextCache={},this.$dataSource=e,this.$properties=n,this.$parent=r,this.$cache={}},addEntityToCache:function(e){this.$cache[d.generateCacheIdFromEntity(e)]=e},addCollectionToCache:function(e){this.$cache[d.generateCacheIdFromCollection(e)]=e},getInstanceByCacheId:function(e){return this.$cache[e]},getPathComponents:function(){return[]},createEntity:function(e,t){if(r.isFunction(e)){var n=e.prototype.constructor.name;if(!n)throw new Error("No model class name defined");var i;t&&(i=this.getInstanceByCacheId(d.generateCacheIdForEntity(n,t)));if(!i){var s={};s[e.prototype.idField]=t,i=new e(s),this.addEntity(i,!0)}return i}throw"Factory has to be a function"},addEntity:function(e,t){e.$context=this,t&&this.addEntityToCache(e)},createCollection:function(e,t){t=t||{};if(r.isFunction(e)){if(e===this.$dataSource.$collectionFactory)throw new Error("Untyped collections not allowed");var n=e.prototype.constructor.name;if(!n)throw new Error("No collection class name defined");r.defaults(t,{factory:e});var i=this.getInstanceByCacheId(d.generateCacheIdForCollection(n));return i||(i=new e(null,t),i.$context=this,this.addCollectionToCache(i)),i}throw"Factory has to be a function"},getContext:function(e,t){var n=this.createContextCacheId(e,t);return n?(this.$contextCache.hasOwnProperty(n)||(this.$contextCache[n]=this.$dataSource.createContext(e,t,this)),this.$contextCache[n]):this},createContextCacheId:function(e,t){var n=[];return r.each(r.extend({},t),function(e,t){n.push(t+"="+e)}),n.sort(),e&&n.unshift(d.generateCacheIdFromEntity(e)),n.length===0?null:n.join("&")},clear:function(){this.$contextCache={}}},{generateCacheIdForCollection:function(e){return e},generateCacheIdForEntity:function(e,t){return e+"_"+t},generateCacheIdFromEntity:function(e){return d.generateCacheIdForEntity(e.constructor.name,e.$[e.idField])},generateCacheIdFromCollection:function(e){return d.generateCacheIdForCollection(e.factory.prototype.constructor.name)}}),v=t.inherit("js.data.DataSource.Processor",{ctor:function(e){if(!e)throw"dataSource is required for Processor";this.$dataSource=e},compose:function(e,t,n){return this._composeEntity(e,t,n)},composeCollection:function(e,t,n){var r=[],i=this,s={};return n=n||{},e.each(function(e){var o,u=e.constructor.name;if(u)if(s.hasOwnProperty(u))o=s[u];else{o=["id"];for(var a in e.schema)e.schema.hasOwnProperty(a)&&e.schema[a].includeInIndex===!0&&o.push(a);s[u]=o}n.includeInIndex=o,r.push(i.compose(e,t,n))}),r},_getReferenceKey:function(e,t){return e},_composeObject:function(e,t,n){var r={};for(var i in e)if(e.hasOwnProperty(i)){var s=this._getCompositionValue(e[i],i,t,n);s!==p&&(r[i]=s)}return r},_getCompositionValue:function(e,t,r,u,a){if(e instanceof i)return this._composeSubModel(e,r,u,a);if(e instanceof n)return this._composeSubCollection(e,r,u,a);if(e instanceof s)return this._composeEntity(e,r,u);if(e instanceof o){var l=[],c=this;return e.each(function(e,t){l.push(c._getCompositionValue(e,t,r,u,a))}),l}if(e instanceof Date)return e?f(e).format(this.$dataSource.$.dateFormat):null;if(e instanceof Array){var h=[];for(var p=0;p<e.length;p++)h.push(this._getCompositionValue(e[p],p,r,u,a));return h}return e instanceof Object?this._composeObject(e):e},_composeEntity:function(e,t,n){var o={},u=e.compose(t,n),a,f,l=e instanceof i,c=e.factory;for(var h in e.schema)if(e.schema.hasOwnProperty(h)&&(!l||!n||!n.includeInIndex||r.contains(n.includeInIndex,h))){a=e.schema[h],f=a.type;var d=this._getCompositionValue(u[h],h,t,n,e);if(d!==p){if(d&&a.isReference&&f.classof&&f.classof(s)&&!f.classof(i)){var v=d[f.prototype.idField];d={},d[f.prototype.idField]=v}o[this._getReferenceKey(h,f)]=d}}return o},_composeSubModel:function(e,t,n,r){return e.identifier()},_composeSubCollection:function(e,t,n){return p},parse:function(e,t,r,u){var a=e.schema,l,c,p,d;for(var v in a)if(a.hasOwnProperty(v)){l=a[v],c=l.type,p=this._getValueForKey(t,v,c,l),d=null;var m,g,y,b;if(c instanceof Array){if(c.length===1)m=c[0];else{if(c.length!==0)throw"Cannot determinate ModelFactory. Multiple factories defined for '"+v+"'.";this.log('ModelFactory for ListItem for "'+v+'" not defined',"warn"),d=s}m instanceof Function&&(d=m,m=null);if(p&&p instanceof Array){b=t[v]=new o;for(y=0;y<p.length;y++)m&&(d=m.resolve(p[y],v)),d&&d.classof(s)?(g=this.$dataSource._getContext(d,e,p[y]).createEntity(d,this._getIdForValue(p[y],d)),g instanceof s&&!(g instanceof i)&&(g.$parent=e,g.$parentEntity=e),g.set(this._parseModel(g,p[y],r,u)),b.add(g)):b.add(p[y])}}else if(n&&c.classof(n)){var w=this.$dataSource._getContext(c,e,p);w&&(e.$[v]instanceof n?t[v]=e.$[v]:(b=t[v]=w.createCollection(c,p instanceof Object&&!(p instanceof Array)?p:null),b.$parent=w.$contextModel,p&&p instanceof Array&&b.reset(this.parseCollection(b,p,r,u))))}else if(c!==Date||!p||p instanceof Date){if(c.classof(s)&&p){c instanceof h?d=c.resolve(p,v):d=c||s;if(!d||!d.classof(s))throw"Factory for type '"+v+"' isn't an instance of Entity";t[v]=g=this.$dataSource._getContext(d,e,p).createEntity(d,this._getIdForValue(p,d)),g instanceof s&&!(g instanceof i)&&(g.$parent=e,g.$parentEntity=e),g.set(this._parseModel(g,p,r,u))}}else t[v]=f(p,this.$dataSource.$.dateFormat).toDate()}return e.parse(t)},_getIdForValue:function(e,t){return e[t.prototype.idField]},_parseModel:function(e,t,n,r){var i=this.$dataSource.getProcessorForModel(e);return i.parse(e,t,n,r)},parseCollection:function(e,t,n,r){if(t instanceof Array){var s,o;for(var u=0;u<t.length;u++){var a=t[u];a instanceof i||(s=this.$dataSource._getContext(e.$modelFactory,e,a),o=s.createEntity(e.$modelFactory,this._getIdForValue(a,e.$modelFactory)),o.set(this._parseModel(o,a,n,r)),t[u]=o)}return t}throw"data has to be an array"},_getValueForKey:function(e,t,n,r){return r&&r.key&&(t=r.key),e[t]},saveSubModels:function(e,t,s){var o=e.schema,a=[],f,l,c,h=function(e){a.push(e)};for(var p in o)o.hasOwnProperty(p)&&(f=o[p],f.classof&&(f.classof(i)?(c=e.$[p],c&&r.include(e.$nestedModels,p)&&a.push(c)):f.classof(n)&&(l=e.$[p],l&&l.each(h))));u().parEach(a,function(e,n){e.save(t,n)}).exec(s)},getSubModelsForModel:function(e){function n(s){if(s===e)return;if(r.indexOf(t,s)!==-1)return;if(s instanceof i){t.push(s);return}for(var u in s)if(s.hasOwnProperty(u)){var a=s[u];if(a instanceof Array)for(var f=0;f<a.length;f++)n(a[f]);else a instanceof o?a.each(n):a instanceof Object&&n(a)}}var t=[];return n(e.$),t}}),m=e.inherit("js.data.DataSource",{$processors:{},$entityFactory:s,$defaultProcessorFactory:v,$defaultProcessor:null,defaults:{dateFormat:"YYYY-MM-DDTHH:mm:ssZ"},ctor:function(){this.$dataSourceConfiguration=null,this.$configuredTypes=[],this.$rootContext=this.createContext(),this.$formatProcessors=[],this.callBase(),this.initializeFormatProcessors(),this.initializeProcessors()},initializeFormatProcessors:function(){},initializeProcessors:function(){this.$defaultProcessor=new this.$defaultProcessorFactory(this);for(var e in this.$processors)this.$processors.hasOwnProperty(e)&&this.$processors[e]instanceof Function&&(this.$processors[e]=new this.$processors[e](this))},composeModel:function(e,t){var n=this.getProcessorForModel(e,t);return n.compose(e,m.ACTION.CREATE,t)},parseModel:function(e,t,n){var r=this.getProcessorForModel(e,n);return e.set(r.parse(e,t,m.ACTION.CREATE,n)),e},_childrenInitialized:function(){this.callBase();for(var e=0;e<this.$configurations.length;e++){var t=this.$configurations[e];if(t instanceof l){this.$dataSourceConfiguration=t;break}}this._validateConfiguration()},_validateConfiguration:function(){},getConfigurationForModelClass:function(e){return this.$dataSourceConfiguration.getConfigurationForModelClass(e)},getConfigurationForCollectionClassName:function(e){return this.$dataSourceConfiguration.getConfigurationForCollectionClassName(e)},getContextForChild:function(e,t){if(e){var r,s;e.classof(i)?r=this.getConfigurationForModelClass(e):e.classof(n)&&(r=this.getConfigurationForModelClass(e.prototype.$modelFactory));if(r&&t){var o=r;do{o=o.$parent;if(!(o instanceof c))break;if(o.$.modelClassName===t.constructor.name)return this.getContextByProperties(t,null,t.$context)}while(o.$parent);var u=t.$context;while(u&&u.$contextModel){if(u.$contextModel.constructor.name===r.$.modelClassName)return u.$contextModel.$context;u=u.$contextModel.$context}}}return t?t.$context:this.root()},getContextByProperties:function(e,t,n){return e||t&&r.size(t)?(n=n||this.root(),n.getContext(e,t)):this.root()},root:function(){return this.$rootContext},createContext:function(e,t,n){return new d(this,e,t,n)},createEntity:function(e,t,n){return n=n||this.getContextByProperties(),n.createEntity(e,t)},createCollection:function(e,t,n){return n=n||this.getContextByProperties(),n.createCollection(e,t)},resolveReferences:function(e,t,n,r){r&&r("Abstract method",t)},loadModel:function(e,t,n){n&&n("Abstract method",e)},loadCollectionPage:function(e,t,n){n&&n("Abstact method loadCollectionPage",e)},countCollection:function(e,t,n){n&&n("Abstrat method countCollection",NaN)},saveModel:function(e,t,n){var r=this;u().seq(function(n){r._beforeModelSave(e,t,n)}).seq(function(n){r._saveModel(e,t,n)}).seq(function(n){r._afterModelSave(e,t,n)}).exec(function(r){n&&n(r,e,t)})},_beforeModelSave:function(e,t,n){n&&n()},_saveModel:function(e,t,n){n&&n("Abstract method saveModel",e)},_afterModelSave:function(e,t,n){n&&n()},removeModel:function(e,t,n){n&&n("Abstract method removeModel",e)},getProcessorForModel:function(e,t){var n;return e&&(n=this.getProcessorForModelClass(e.factory,t)),n||this.$defaultProcessor},getProcessorForModelClass:function(e,t){var n=this.getConfigurationForModelClass(e);if(n&&n.$.processor){var r=n.$.processor;if(this.$processors[r])return this.$processors[r];throw"Processor for '"+r+"' not an instance of js.data.DataSource.Processor."}},getProcessorForCollection:function(e,t){var n;return e&&e.$modelFactory&&(n=this.getProcessorForModelClass(e.$modelFactory,t)),n||this.$defaultProcessor},getFormatProcessor:function(e){return this.$formatProcessors[0]},clone:function(){var e=this.callBase();return e.$dataSourceConfiguration=this.$dataSourceConfiguration,e},_getContext:function(e,t,r){if(e.classof){if(e.classof(n))return t.getContextForChild(e);if(e.classof(i))return t.getContextForChild(e);if(e.classof(s))return t.getContextForChild(e)}return null},_translateQueryObject:function(e){return e}});return m.FormatProcessor=t.inherit("js.data.DataSource.FormatProcessor",{serialize:function(e){throw"abstract method"},deserialize:function(e){throw"abstract method"},getContentType:function(){throw"abstract method"}}),m.JsonFormatProcessor=m.FormatProcessor.inherit("js.data.DataSource.JsonFormatProcessor",{serialize:function(e){return a.stringify(e)},deserialize:function(e){return a.parse(e)},getContentType:function(){return"application/json"}}),m.ERROR={NOT_FOUND:"not_found"},m.Context=d,m.Processor=v,m.ACTION={LOAD:"load",CREATE:"create",UPDATE:"update",DELETE:"delete"},m.IdGenerator={genId:function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})},m}),define=typeof define!="undefined"?define:function(e,t){module.exports=t(exports,require("../..").Query),define=undefined},define("js/lib/query/composer/RestQueryComposer",["exports","Query"],function(e,t){var n={eql:"=",gt:">",lt:"<",lte:"<=",gte:">="},r,i={compose:function(e){var t=e.query,n={};return t.sort&&(n.sort=this.translateSort(t.sort)),t.where&&(n.where=this.translateOperator(t.where)),n},translateSort:function(e){var t=[];for(var n=0;n<e.length;n++)t.push((e[n].direction===1?"+":"-")+e[n].field);return t.join(",")},translateOperator:function(e,i){i=i===r?0:i;var s=e.operator;if(e instanceof t.Where){var o=this.translateExpressions(e.expressions,i+1).join(" "+s+" ");return o.length&&s!=="not"&&i!==0&&(o="("+o+")"),s==="not"&&(o=s+o),o}if(!(e instanceof t.Comparator))return s;var u=e.getValue(),a=typeof u;a==="string"&&(/^(\d+|false|true|null)$/.test(u)||this.value==="false"||this.value==="true")&&(u=a+":"+u);if(n.hasOwnProperty(s))return e.field+n[s]+u;if(e.field&&u!==r)return u instanceof Array&&(u="("+e.value.join(",")+")"),s+"("+e.field+","+u+")"},translateExpressions:function(e,t){var n=[];for(var r=0;r<e.length;r++)n.push(this.translateOperator(e[r],t));return n}};return e.RestQueryComposer=i,e}),define("js/data/RestDataSource",["js/data/DataSource","js/data/Model","underscore","flow","JSON","js/data/Collection","require","js/lib/query/composer/RestQueryComposer"],function(e,t,n,r,i,s,o,u){var a=/http.+\/([^/]+)$/,f=e.Processor.inherit("js.data.RestDataSource.RestDataProcessor",{_composeSubModel:function(e,n,r,i){if(i instanceof t){var s=0,o=this.$dataSource.$dataSourceConfiguration.getConfigurationForModelClass(e.factory),u=s.$parent,a=[];while(o&&o.$.path)a.unshift(o),o=o.$parent;var f=[];o=this.$dataSource.$dataSourceConfiguration.getConfigurationForModelClass(i.factory);while(o&&o.$.path)f.unshift(o),o=o.$parent;var l=0;while(f[l]&&a[l]&&f[l].$.path===a[l].$.path)l++;s=a.length-l;if(s>0){var c=[];u=e;while(s>0)c.unshift(u.identifier()),u=u.$context.$contextModel,s--;var h={};return h[e.idField]=c.join("/"),h}}var p={};return p[e.idField]=e.identifier(),p}}),l=e.inherit("js.data.RestDataSource",{defaults:{endPoint:null,gateway:null,determinateContextAttribute:"href",parsePayloadOnCreate:!0,parsePayloadOnUpdate:!0,useSafeHttpMethods:!1,collectionPageSize:100,suffix:null},ctor:function(){this.callBase()},$defaultProcessorFactory:f,initialize:function(){this.$.endPoint||this.log("No end-point for RestDataSource defined","warn"),this.$.gateway||(this.$.gateway=this.$.endPoint)},_validateConfiguration:function(){if(!this.$dataSourceConfiguration)throw"No DataSourceConfiguration specified"},initializeFormatProcessors:function(){var t=new e.JsonFormatProcessor;t.regex=/json/,this.$formatProcessors.push(t)},createContext:function(e,t,n){return new l.RestContext(this,e,t,n)},getQueryParameters:function(e,t){var r={};return this.$.useSafeHttpMethods&&(e===l.METHOD.DELETE?r.method="delete":e===l.METHOD.PUT&&(r.method="put")),t instanceof s&&(n.defaults(r,t.getQueryParameters(e),t.getRoot().$context.getQueryParameters()),t.$.query&&n.defaults(r,this.getQueryComposer().compose(t.$.query))),r},getQueryComposer:function(){return u.RestQueryComposer},_getHttpMethod:function(e){if(this.$.useSafeHttpMethods)if(e===l.METHOD.PUT||e===l.METHOD.DELETE)return l.METHOD.POST;return e},getPathComponentsForResource:function(e){return e instanceof s?this.getPathComponentsForModelClass(e.$modelFactory):e instanceof t?this.getPathComponentsForModel(e):null},getPathComponentsForModel:function(e){if(e){var t=this.getPathComponentsForModelClass(e.factory);if(t)return e.isNew()||t.push(e.identifier()),t}return null},getPathComponentsForModelClass:function(e){if(e){var t=this.$dataSourceConfiguration.getConfigurationForModelClass(e);if(t){var n=t.$.path;if(n)return[n]}}return null},_buildUriForResource:function(e,t){var n=this.getPathComponentsForResource(e);if(!n)throw new Error("path for resource unknown");var r=[t||this.$.gateway];return r=r.concat(e.$context.getPathComponents()),r=r.concat(n),this.$.suffix&&(r[r.length-1]=r[r.length-1]+"."+this.$.suffix),this._resourcePathToUri(r,e)},_resourcePathToUri:function(e,t){return e.join("/")},loadModel:function(e,t,i){var s=this,o=this._buildUriForResource(e),u=n.defaults(e.$context.getQueryParameters(),this.getQueryParameters(l.METHOD.GET,e));t.noCache&&(u.timestamp=(new Date).getTime()),r().seq("xhr",function(e){s.$stage.$applicationContext.ajax(o,{type:l.METHOD.GET,queryParameter:u},e)}).seq(function(n){var r=this.vars.xhr;r.status===200||r.status===304?(s._parseModelPayload(r,e,t),n(null,e,t)):s._handleXHRError({url:o,xhr:r,queryParameter:u,model:e,options:t},i)}).exec(function(n){i&&i(n,e,t)})},_parseModelPayload:function(t,n,r){var i=t.getResponseHeader("Content-Type"),s=this.getFormatProcessorForContentType(i);if(!s)throw new Error("No formatProcessor for content type '"+i+"' found",null,r);var o=s.deserialize(t.responses.text),u=this.getProcessorForModel(n,r);o=u.parse(n,o,e.ACTION.LOAD,r),n.set(o)},handleCreationSuccess:function(e,t,n){var r=e.model,i=function(t){n&&n(t,r,e.options)},o=this;try{var u=t.getResponseHeader("Location");if(u){o.$.parsePayloadOnCreate&&o._parseModelPayload(t,r,e.options);var a=this.extractIdFromLocation(u,e);if(a||a===0){r.set(r.idField,a),r.hrefField&&r.set(r.hrefField,u);var f=r.schema,l;for(var c in f)if(f.hasOwnProperty(c)){l=f[c];if(l.classof&&l.classof(s)){var h=r.getContextForChild(l);r.set(c,h.createCollection(l,null))}}r.$context.addEntityToCache(r),i(null)}else i("Id couldn't be extracted")}else i("Location header not found")}catch(p){i(p||!0)}},_getContext:function(e,t,n){if(this.$.determinateContextAttribute){if(!n)return null;if(n.hasOwnProperty(this.$.determinateContextAttribute)){var r,i,s,u=this.root(),a,f,l;if(!this.$cachedEndpoint){var c=n[this.$.determinateContextAttribute];r=c.replace(/(http(s)?:\/\/.+?)\//i,""),this.$cachedEndpoint=c.substring(0,c.length-r.length),i=r.split("/");while(!this.$dataSourceConfiguration.getConfigurationByKeyValue("path",i[0]))this.$cachedEndpoint+=i.shift()+"/"}else r=n[this.$.determinateContextAttribute].replace(this.$cachedEndpoint,""),i=r.split("/");for(var h=0;h<i.length-2;h+=2){l=i[h],f=i[h+1],s?s=s.getConfigurationByKeyValue("path",l):s=this.$dataSourceConfiguration.getConfigurationByKeyValue("path",l);if(!s)throw new Error("Couldn't find configuration for path element "+h+" of "+i.join("/")+" ");a=o(s.$.modelClassName.replace(/\./g,"/"));var p=u.createEntity(a,f);u=u.getContext(p)}return u}}return this.callBase()},handleUpdateSuccess:function(e,t,n){var r=e.model;this.$.parsePayloadOnUpdate&&this._parseModelPayload(t,r,e.options),n&&n(null,r,e.options)},extractIdFromLocation:function(e,t){var n=a.exec(e);return n?n[1]:null},_saveModel:function(i,s,o){s=s||{};var u=e.ACTION.UPDATE,a=l.METHOD.PUT;i._status()===t.STATE.NEW&&(u=e.ACTION.CREATE,a=l.METHOD.POST);var f=this.getProcessorForModel(i,s),c=this.getFormatProcessor(u,i),h=this;r().seq(function(e){f.saveSubModels(i,s,e)}).seq(function(t){var r=h._buildUriForResource(i),o=n.defaults(i.$context.getQueryParameters(),h.getQueryParameters(a,i));a=h._getHttpMethod(a);var l=f.compose(i,u,s),p=c.serialize(l);h.$stage.$applicationContext.ajax(r,{type:a,queryParameter:o,data:p,xhrCreated:s.xhrCreated,xhrBeforeSend:s.xhrBeforeSend,contentType:c.getContentType()},function(n,a){if(!n){var f={xhr:a,url:r,queryParameter:o,model:i,options:s};u===e.ACTION.CREATE&&a.status===201?h.handleCreationSuccess(f,a,t):u===e.ACTION.UPDATE&&a.status===200?h.handleUpdateSuccess(f,a,t):h._handleXHRError(f,t)}else t(n)})}).exec(function(e){o&&o(e,i,s)})},extractListMetaData:function(e,t,n,r){return t},extractListData:function(e,t,r,i){for(var s in t)if(t.hasOwnProperty(s)&&n.isArray(t[s]))return t[s]},loadCollectionPage:function(t,r,s){var o=t.getRoot(),u=this.$dataSourceConfiguration.getConfigurationForModelClass(o.$modelFactory);if(!u)throw new Error("Couldn't find path config for "+o.$modelFactory.prototype.constructor.name);var a=[u.$.path];if(!a){s("path for model unknown",null,r);return}var f={};n.defaults(f,(r||{}).params,this.getQueryParameters(l.METHOD.GET,t.$collection)),n.extend(f,this._getPagingParameterForCollectionPage(t)),r.noCache&&(f.timestamp=(new Date).getTime()),f.fullData=f.fullData||r.fullData||!1;for(var c in f)f.hasOwnProperty(c)&&n.isObject(f[c])&&(f[c]=i.stringify(f[c]));var h=this._buildUriForResource(o),p=this;this.$stage.$applicationContext.ajax(h,{type:l.METHOD.GET,queryParameter:f},function(n,i){if(!!n||i.status!=200&&i.status!=304)p._handleXHRError({url:h,xhr:i,queryParameter:f,collection:o,options:r},s);else{var u=i.getResponseHeader("Content-Type"),a=p.getFormatProcessorForContentType(u);if(!a){s("No formatProcessor for content type '"+u+"' found",null,r);return}try{var l=a.deserialize(i.responses.text),c=p.extractListMetaData(t,l,r,i);t.setMetaData(c);var d=p.extractListData(t,l,r,i),v=p.getProcessorForCollection(t);d=v.parseCollection(t.getRoot(),d,e.ACTION.LOAD,r),t.add(d),s(null,t,r)}catch(m){p.log(m,"error"),s(m,t,r)}}})},_handleXHRError:function(e,t){this.trigger("on:xhrError",e),t&&t(e)},_createSortParameter:function(e){var t=null,n=[];for(var r in e)e.hasOwnProperty(r)&&(t=t||{},n.push((e[r]===-1?"+":"-")+r));return n.length>0&&(t={sort:"("+n.join(",")+")"}),t},_getPagingParameterForCollectionPage:function(e){var t={};return e.$offset&&(t.offset=e.$offset),e.$limit&&(t.limit=e.$limit),t},removeModel:function(e,t,r){r=r||function(){};var i=this._buildUriForResource(e),s=l.METHOD.DELETE,o=n.defaults(e.$context.getQueryParameters(),this.getQueryParameters(s,e));s=this._getHttpMethod(s),this.$stage.$applicationContext.ajax(i,{type:s,queryParameter:o},function(t,n){!!t||n.status!=200&&n.status!=304&&n.status!=202&&n.status!=204?(t=t||"wrong status code",r(t,e)):r(null,e)})},getFormatProcessorForContentType:function(e){for(var t=0;t<this.$formatProcessors.length;t++){var n=this.$formatProcessors[t];if(n.regex.test(e))return n}return null}});return l.RestContext=e.Context.inherit("js.data.RestDataSource.Context",{getPathComponents:function(){var e=[];if(!this.$parent)return[];e=this.$parent.getPathComponents();if(!this.$contextModel)throw new Error("ContextModel missing for non-root-Context");var t=this.$dataSource.getConfigurationForModelClass(this.$contextModel.factory);return e.push(t.$.path,this.$contextModel.identifier()),e},createCollection:function(e,t,r){return t=t||{},n.defaults(t,{pageSize:this.$dataSource.$.collectionPageSize||100}),this.callBase(e,t,r)},getQueryParameters:function(){return{}}}),l.METHOD={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE"},l.XmlFormatProcessor=e.FormatProcessor.inherit("js.data.RestDataSource.XmlFormatProcessor",{serialize:function(e){throw"not implemented"},deserialize:function(e){throw"not implemented"}}),l.RestDataProcessor=f,l}),define("documentation/data/DocumentationDataSource",["js/data/RestDataSource","js/data/DataSource"],function(e,t){var n=t.Processor.inherit("documentation.data.DocumentationDataSource.PackageProcessor",{parse:function(e,t,n,r){var i=[];t.classes=t.classes||[];for(var s=0;s<t.classes.length;s++)i.push({id:t.classes[s]});return t.classes=i,this.callBase(e,t,n,r)}});return e.inherit("documentation.data.DocumentationDataSource",{$processors:{PackageProcessor:n}})}),define("js/data/DataView",["js/core/Component","js/core/List","underscore"],function(e,t,n){return e.inherit("js.data.DataView",{defaults:{baseList:null,list:null},initialize:function(){this.$.list=new t,this.bind("baseList","add",this._onItemAdded,this),this.bind("baseList","remove",this._onItemRemoved,this),this.bind("baseList","item:change",this._onItemChanged,this),this.bind("baseList","reset",this._onReset,this),this.bind("baseList","sort",this._onSort,this),this.callBase()},_initializationComplete:function(){this.$.baseList&&this.$.baseList instanceof t&&this._innerReset(this.$.baseList.$items),this.callBase()},_onItemChanged:function(){},_onReset:function(e){this._innerReset(e.items)},_onSort:function(e){this.$.list.sort(e.sortFnc)},_innerReset:function(e){},_innerDestroy:function(){this.unbind("baseList","add",this._onItemAdded,this),this.unbind("baseList","remove",this._onItemRemoved,this),this.unbind("baseList","item:change",this._onItemChanged,this),this.unbind("baseList","reset",this._onReset,this),this.unbind("baseList","sort",this._onSort,this),this.callBase()}})}),define("js/data/FilterDataView",["js/data/DataView","underscore"],function(e,t){return e.inherit("js.data.FilterDataView",{initialize:function(){this.callBase(),this.bind("change",this._onFilterChanged,this)},_onFilterChanged:function(){this._innerReset(this.$.baseList.$items)},_onItemAdded:function(e){var t=this._filterItem(e.$.item,e.index);t===!0&&this.$.list.add(e.$.item,e.index)},_onItemRemoved:function(e){this.$.list.remove(e.$.item,e.$.index)},_onItemChanged:function(e){var n=this._filterItem(e.$.item,e.$.index),r=t.include(this.$.list.$items,e.$.item);r&&n===!1?this.$.list.remove(e.$.item,e.$.index):!r&&n===!0&&this.$.list.add(e.$.item,e.$.index)},_innerReset:function(e){var t=[],n;for(var r=0;r<e.length;r++)n=e[r],this._filterItem(n,r)===!0&&t.push(n);this.$.list.reset(t)},_filterItem:function(e,t){return this.$.filterFnc?this.$.filterFnc.call(this,e,t,this):!0}})}),define("js/ui/TreeViewClass",["js/ui/View"],function(e){var t="tree-view-leaf",n="tree-view-root";return e.inherit({defaults:{componentClass:"tree-view",node:null,selectedNode:null,expanded:"{node.expanded}",root:"{_self()}"},$classAttributes:["root","node"],_initializationComplete:function(){this.bind("root","change:selectedNode",this._onSelectedNodeChange,this),this.callBase(),this.$.root&&this.$.root.$.selectedNode&&this.$.node===this.$.root.$.selectedNode&&this.set("selected",!0)},_commitSelectedNode:function(e){if(e){var t=e.$.parentNode;while(t)t.set("expanded",!0),t=t.$.parentNode}},_onSelectedNodeChange:function(e){var t=e.$;this.$.node&&this.set("selected",t===this.$.node)},_renderNode:function(e){e?(e.$.isLeaf?this.addClass(t):this.removeClass(t),e.$.isRoot?this.addClass(n):this.removeClass(n)):(this.removeClass(t),this.removeClass(n))},_renderExpanded:function(e){e?this.addClass("expanded"):this.removeClass("expanded")},_handleClick:function(){if(this.$.node){this.$.node.$.isLeaf||this.$.node.toggle();var e=this.$.root;this.$.node.$.expanded||this.$.node.$.isLeaf?e.set("selectedNode",this.$.node):e.set("selectedNode",null)}},_self:function(){return this}})}),define("js/ui/TemplatePlaceHolder",["js/ui/View"],function(e){return e.inherit({defaults:{item:null,templateName:null},$classAttributes:["item","templateName"],_renderTemplateName:function(e){if(e){this.$template||(this.$template=this.getTemplate(e));if(!this.$templateChildren){this.$templateChildren=this.$template.createComponents({item:this.$.item},this.$template.$parentScope);var t;for(var n=0;n<this.$templateChildren.length;n++)t=this.$templateChildren[n],t.$classAttributes&&t.$classAttributes.push("item"),this.addChild(t)}}else this.$template=null},_commitChangedAttributes:function(e){this.callBase();if(this.$templateChildren&&e.hasOwnProperty("item"))for(var t=0;t<this.$templateChildren.length;t++)this.$templateChildren[t].set("item",e.item)}})}),define("xaml!js/ui/TreeView",["js/ui/TreeViewClass","js/core/Element","js/ui/TemplatePlaceHolder","js/ui/ItemsView","js/core/Template","js/html/HtmlElement"],function(e,t){return e.inherit({_$descriptor:t.xmlStringToDom('<ui:TreeViewClass xmlns="http://www.w3.org/1999/xhtml" xmlns:js="js.core" xmlns:ui="js.ui">\n\n    <ui:TemplatePlaceHolder item="{node}" templateName="label" class="tree-view-label" onclick="_handleClick"/>\n\n    <ui:ItemsView items="{node.childNodes}" visible="{node.expanded}" class="tree-view-list" tagName="ul">\n        <js:Template name="item">\n            <li>\n                <ui:TreeView node="{item}" root="{root}"/>\n            </li>\n        </js:Template>\n    </ui:ItemsView>\n\n</ui:TreeViewClass>')})}),define("js/ui/ListView",["js/ui/ItemsView","js/html/HtmlElement"],function(e,t){return e.inherit("js.ui.ListView",{defaults:{tagName:"ul"},_createComponentForItem:function(e,n){var r={};r[this._getItemKey()]=e,r[this._getIndexKey()]=n;var i=this.$templates.item.createComponents(r),s=this.createComponent(t,{tagName:"li"});for(var o=0;o<i.length;o++)i[o].$classAttributes&&i[o].$classAttributes.push(this._getItemKey(),this._getIndexKey()),s.addChild(i[o]);return s}})}),define("js/ui/CheckboxClass",["js/ui/View"],function(e){return e.inherit("js.ui.CheckboxClass",{defaults:{componentClass:"checkbox",checked:!1,value:null,label:"",name:null},_renderLabel:function(e,t){e&&this._renderTemplateToPlaceHolder("label","label",{$label:e})}})}),define("js/html/Input",["js/html/HtmlElement","underscore","moment"],function(e,t,n){var r={},i;return e.inherit("js.html.Input",{$classAttributes:["updateOnEvent","checked"],defaults:{type:"text",checked:!1,updateOnEvent:"input"},_commitChangedAttributes:function(e){this.$.type==="radio"&&e.name&&(this.$previousAttributes.name&&r[this.$previousAttributes.name]&&delete r[this.$previousAttributes.name][this.$cid],r[e.name]=r[e.name]||{},r[e.name][this.$cid]=this),this.callBase()},_renderEnabled:function(e){e?this.$el.removeAttribute("disabled"):this.$el.setAttribute("disabled","disabled")},_supportsPlaceholder:function(){return"placeHolder"in this.$el||"placeholder"in this.$el},_renderValue:function(e){if(e===null||e===i)e="";e==""&&!this._supportsPlaceholder()&&this.$.placeholder&&!this.$.focused&&(e=this.$.placeholder),String(e)!==this.$el.value&&(this.$.type==="date"&&e instanceof Date&&(e=n(e).format("YYYY-MM-DD")),this.$el.value=e)},_commitChecked:function(e){if(e&&this.$.type==="radio"){var t=r[this.$.name];for(var n in t)t.hasOwnProperty(n)&&t[n]!==this&&t[n].set("checked",!1)}},_renderChecked:function(e){this.$el.checked=!!e},_transformValue:function(e){if(this.$.type==="number"){if(e==="")return null;e=parseInt(e,10),isNaN(e)&&(e=this.$.value)}else if(this.$.type==="date")try{e=e!==""?new Date(e):null}catch(t){this.log("Invalid Date","warn"),e=this.$.value}return e},_bindDomEvents:function(){var e=this;if(t.include(["text","password","date","number"],this.$.type)){if(this.$.type==="date"||this.$.type==="number")this.$.updateOnEvent="change";this.$.updateOnEvent==="input"&&"onpropertychange"in this.$el?this.bindDomEvent("keyup",function(t){e.set("value",e._transformValue(e.$el.value))}):this.bindDomEvent(this.$.updateOnEvent,function(t){e.set("value",e._transformValue(e.$el.value))})}else(this.$.type==="checkbox"||this.$.type==="radio")&&this.bindDomEvent("click",function(t){e.set("checked",e.$el.checked)});this.callBase()},_renderPlaceholder:function(e){if(!this._supportsPlaceholder()){var t=this;this.__blurHandler||(this.__blurHandler=function(e){t.set("focused",!1);if(t.$el.value!="")return;t.$el.value=t.$.placeholder||"",t.addClass("placeholder")},this.bindDomEvent("blur",this.__blurHandler)),this.__focusHandler||(this.__focusHandler=function(){t.set("focused",!0),t.removeClass("placeholder"),t.$el.value=""},this.bindDomEvent("focus",this.__focusHandler)),e&&this.addClass("placeholder")}else this._setAttribute("placeHolder",e)}})}),define("js/ui/PlaceHolder",["js/html/HtmlElement","js/core/Content","underscore"],function(e,t,n){return e.inherit({defaults:{name:null},render:function(){if(this.isRendered())return this.$el;this.$textNode=this.$stage.$document.createTextNode("");var e;return this.$.content&&(e=this._getDomElementForContent(this.$.content)),e||(e=this.$textNode),this.$el=e,this.$el},clear:function(){this.set({content:null})},_renderContent:function(e){var t=this.$el.parentNode;if(t){var n=this._getDomElementForContent(e);n?(t.replaceChild(n,this.$el),this.$el=n):this.$textNode!==this.$el&&(t.replaceChild(this.$textNode,this.$el),this.$el=this.$textNode)}},_getDomElementForContent:function(e){var r;e instanceof t?r=e.$children:n.isArray(e)?r=e:e?r=[e]:r=[];var i,s;for(var o=0;o<r.length;o++){i=r[o];if(i.render)return s=i.render(),s}return null}})}),define("xaml!js/ui/Checkbox",["js/ui/CheckboxClass","js/core/Element","js/core/Template","js/html/Input","js/ui/PlaceHolder"],function(e,t){return e.inherit({_$descriptor:t.xmlStringToDom('<ui:CheckboxClass xmlns="http://www.w3.org/1999/xhtml" xmlns:js="js.core" xmlns:ui="js.ui" tagName="label">\n    <js:Template name="layout">\n        <input type="checkbox" name="{name}" checked="{{checked}}" value="{{value}}" enabled="{enabled}"/> <ui:PlaceHolder name="label"/>\n    </js:Template>\n    <js:Template name="label">{label}</js:Template>\n</ui:CheckboxClass>')})}),define("md/lib/marked",function(){return function(){function n(e,n){return e[0][0]!=="!"?'<a href="'+f(n.href)+'"'+(n.title?' title="'+f(n.title)+'"':"")+">"+t.lexer(e[1])+"</a>":'<img src="'+f(n.href)+'" alt="'+f(e[1])+'"'+(n.title?' title="'+f(n.title)+'"':"")+">"}function s(){return i=r.pop()}function o(){switch(i.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+i.depth+">"+t.lexer(i.text)+"</h"+i.depth+">\n";case"code":return v.highlight&&(i.code=v.highlight(i.text,i.lang),i.code!=null&&i.code!==i.text&&(i.escaped=!0,i.text=i.code)),i.escaped||(i.text=f(i.text,!0)),"<pre><code"+(i.lang?' class="lang-'+i.lang+'"':"")+">"+i.text+"</code></pre>\n";case"blockquote_start":var e="";while(s().type!=="blockquote_end")e+=o();return"<blockquote>\n"+e+"</blockquote>\n";case"list_start":var n=i.ordered?"ol":"ul",e="";while(s().type!=="list_end")e+=o();return"<"+n+">\n"+e+"</"+n+">\n";case"list_item_start":var e="";while(s().type!=="list_item_end")e+=i.type==="text"?u():o();return"<li>"+e+"</li>\n";case"loose_item_start":var e="";while(s().type!=="list_item_end")e+=o();return"<li>"+e+"</li>\n";case"html":return v.sanitize?t.lexer(i.text):!i.pre&&!v.pedantic?t.lexer(i.text):i.text;case"paragraph":return"<p>"+t.lexer(i.text)+"</p>\n";case"text":return"<p>"+u()+"</p>\n"}}function u(){var e=i.text,n;while((n=r[r.length-1])&&n.type==="text")e+="\n"+s().text;return t.lexer(e)}function a(e){r=e.reverse();var t="";while(s())t+=o();return r=null,i=null,t}function f(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function l(e){var t="",n=e.length,r=0,i;for(;r<n;r++)i=e.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t}function c(){var e="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b";return e}function h(e,t){return e=e.source,t=t||"",function n(r,i){return r?(e=e.replace(r,i.source||i),n):new RegExp(e,t)}}function p(){}function d(t,n){return g(n),a(e.lexer(t))}function g(n){n||(n=m);if(v===n)return;v=n,v.gfm?(e.fences=e.gfm.fences,e.paragraph=e.gfm.paragraph,t.text=t.gfm.text,t.url=t.gfm.url):(e.fences=e.normal.fences,e.paragraph=e.normal.paragraph,t.text=t.normal.text,t.url=t.normal.url),v.pedantic?(t.em=t.pedantic.em,t.strong=t.pedantic.strong):(t.em=t.normal.em,t.strong=t.normal.strong)}var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:p,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [^\0]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *([^\s]+)(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^([^\n]+\n?(?!body))+\n*/,text:/^[^\n]+/};e.bullet=/(?:[*+-]|\d+\.)/,e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,e.item=h(e.item,"gm")(/bull/g,e.bullet)(),e.list=h(e.list)(/bull/g,e.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),e.html=h(e.html)("comment",/<!--[^\0]*?-->/)("closed",/<(tag)[^\0]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,c())(),e.paragraph=function(){var t=e.paragraph.source,n=[];return function r(t){return t=e[t]?e[t].source:t,n.push(t.replace(/(^|[^\[])\^/g,"$1")),r}("hr")("heading")("lheading")("blockquote")("<"+c())("def"),new RegExp(t.replace("body",n.join("|")))}(),e.normal={fences:e.fences,paragraph:e.paragraph},e.gfm={fences:/^ *``` *(\w+)? *\n([^\0]+?)\s*``` *(?:\n+|$)/,paragraph:/^/},e.gfm.paragraph=h(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace(/(^|[^\[])\^/g,"$1")+"|")(),e.lexer=function(t){var n=[];return n.links={},t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),e.token(t,n,!0)},e.token=function(t,n,r){var t=t.replace(/^ +$/gm,""),i,s,o,u,a,f,l;while(t){if(o=e.newline.exec(t))t=t.substring(o[0].length),o[0].length>1&&n.push({type:"space"});if(o=e.code.exec(t)){t=t.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),n.push({type:"code",text:v.pedantic?o:o.replace(/\n+$/,"")});continue}if(o=e.fences.exec(t)){t=t.substring(o[0].length),n.push({type:"code",lang:o[1],text:o[2]});continue}if(o=e.heading.exec(t)){t=t.substring(o[0].length),n.push({type:"heading",depth:o[1].length,text:o[2]});continue}if(o=e.lheading.exec(t)){t=t.substring(o[0].length),n.push({type:"heading",depth:o[2]==="="?1:2,text:o[1]});continue}if(o=e.hr.exec(t)){t=t.substring(o[0].length),n.push({type:"hr"});continue}if(o=e.blockquote.exec(t)){t=t.substring(o[0].length),n.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),e.token(o,n,r),n.push({type:"blockquote_end"});continue}if(o=e.list.exec(t)){t=t.substring(o[0].length),n.push({type:"list_start",ordered:isFinite(o[2])}),o=o[0].match(e.item),i=!1,l=o.length,f=0;for(;f<l;f++)u=o[f],a=u.length,u=u.replace(/^ *([*+-]|\d+\.) +/,""),~u.indexOf("\n ")&&(a-=u.length,u=v.pedantic?u.replace(/^ {1,4}/gm,""):u.replace(new RegExp("^ {1,"+a+"}","gm"),"")),s=i||/\n\n(?!\s*$)/.test(u),f!==l-1&&(i=u[u.length-1]==="\n",s||(s=i)),n.push({type:s?"loose_item_start":"list_item_start"}),e.token(u,n),n.push({type:"list_item_end"});n.push({type:"list_end"});continue}if(o=e.html.exec(t)){t=t.substring(o[0].length),n.push({type:"html",pre:o[1]==="pre",text:o[0]});continue}if(r&&(o=e.def.exec(t))){t=t.substring(o[0].length),n.links[o[1].toLowerCase()]={href:o[2],title:o[3]};continue}if(r&&(o=e.paragraph.exec(t))){t=t.substring(o[0].length),n.push({type:"paragraph",text:o[0]});continue}if(o=e.text.exec(t)){t=t.substring(o[0].length),n.push({type:"text",text:o[0]});continue}}return n};var t={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:p,tag:/^<!--[^\0]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([^\0]+?)__(?!_)|^\*\*([^\0]+?)\*\*(?!\*)/,em:/^\b_((?:__|[^\0])+?)_\b|^\*((?:\*\*|[^\0])+?)\*(?!\*)/,code:/^(`+)([^\0]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[^\0]+?(?=[\\<!\[_*`]| {2,}\n|$)/};t._linkInside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,t._linkHref=/\s*<?([^\s]*?)>?(?:\s+['"]([^\0]*?)['"])?\s*/,t.link=h(t.link)("inside",t._linkInside)("href",t._linkHref)(),t.reflink=h(t.reflink)("inside",t._linkInside)(),t.normal={url:t.url,strong:t.strong,em:t.em,text:t.text},t.pedantic={strong:/^__(?=\S)([^\0]*?\S)__(?!_)|^\*\*(?=\S)([^\0]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([^\0]*?\S)_(?!_)|^\*(?=\S)([^\0]*?\S)\*(?!\*)/},t.gfm={url:/^(https?:\/\/[^\s]+[^.,:;"')\]\s])/,text:/^[^\0]+?(?=[\\<!\[_*`]|https?:\/\/| {2,}\n|$)/},t.lexer=function(e){var i="",s=r.links,o,u,a,c;while(e){if(c=t.escape.exec(e)){e=e.substring(c[0].length),i+=c[1];continue}if(c=t.autolink.exec(e)){e=e.substring(c[0].length),c[2]==="@"?(u=c[1][6]===":"?l(c[1].substring(7)):l(c[1]),a=l("mailto:")+u):(u=f(c[1]),a=u),i+='<a href="'+a+'">'+u+"</a>";continue}if(c=t.url.exec(e)){e=e.substring(c[0].length),u=f(c[1]),a=u,i+='<a href="'+a+'">'+u+"</a>";continue}if(c=t.tag.exec(e)){e=e.substring(c[0].length),i+=v.sanitize?f(c[0]):c[0];continue}if(c=t.link.exec(e)){e=e.substring(c[0].length),i+=n(c,{href:c[2],title:c[3]});continue}if((c=t.reflink.exec(e))||(c=t.nolink.exec(e))){e=e.substring(c[0].length),o=(c[2]||c[1]).replace(/\s+/g," "),o=s[o.toLowerCase()];if(!o||!o.href){i+=c[0][0],e=c[0].substring(1)+e;continue}i+=n(c,o);continue}if(c=t.strong.exec(e)){e=e.substring(c[0].length),i+="<strong>"+t.lexer(c[2]||c[1])+"</strong>";continue}if(c=t.em.exec(e)){e=e.substring(c[0].length),i+="<em>"+t.lexer(c[2]||c[1])+"</em>";continue}if(c=t.code.exec(e)){e=e.substring(c[0].length),i+="<code>"+f(c[2],!0)+"</code>";continue}if(c=t.br.exec(e)){e=e.substring(c[0].length),i+="<br>";continue}if(c=t.text.exec(e)){e=e.substring(c[0].length),i+=f(c[0]);continue}}return i};var r,i;p.exec=p;var v,m;d.options=d.setOptions=function(e){return m=e,g(e),d},d.setOptions({gfm:!0,pedantic:!1,sanitize:!1,highlight:null}),d.parser=function(e,t){return g(t),a(e)},d.lexer=function(t,n){return g(n),e.lexer(t)},d.parse=d,typeof module!="undefined"?module.exports=d:this.marked=d}.call(function(){return this||(typeof window!="undefined"?window:global)}()),marked}),define("md/MarkdownTextElement",["js/core/TextElement","md/lib/marked","underscore"],function(e,t,n){var r=/\r\n/g,i=/\r/g,s=/\n/,o=/\S/,u=/\s*/;return e.inherit("md.MarkdownTextElement",{render:function(){return this.$initialized||this._initialize(this.$creationPolicy),this.$el=this.$stage.$document.createElement("span"),n.isUndefined(this.$.textContent)||this._renderTextContent(this.$.textContent),this.$el},normalizeIndent:function(e){var t=e.split(s),n=null,r,i;for(r=0;r<t.length;r++){i=t[r];if(o.test(i)){var a=u.exec(i);if(!a)return e;n===null?n=a[0].length:n=Math.min(n,a[0].length);if(n===0)return e}}var f=new RegExp("^\\s{"+n+"}");for(r=0;r<t.length;r++)t[r]=t[r].replace(f,"");return t.join("\n")},_renderTextContent:function(e){e=e.replace(r,"\n"),e=e.replace(i,"\n"),this.$.normalizeIndent===!0&&(e=this.normalizeIndent(e)),this.$el.innerHTML=t(e.trim())}})}),define("md/View",["js/html/HtmlElement","md/MarkdownTextElement"],function(e){return e.inherit("md/View",{defaults:{tagName:"span",normalizeIndent:!0},_createTextElement:function(e,t){return this.$stage.$applicationContext.createInstance("md/MarkdownTextElement",[{normalizeIndent:this.$.normalizeIndent},e,this.$stage,this,t])}})}),define("app/view/MethodViewClass",["js/ui/View","documentation/data/DocumentationDataSource"],function(e,t){return e.inherit({defaults:{method:null,definedByLink:null},inject:{dataSource:t},methodCSSClasses:function(){var e=[this.$.method.$.visibility];return this.$.method.$.hasOwnProperty("definedBy")&&e.push("inherited"),e.join(" ")},getClass:function(e){}})}),define("xaml!app/view/MethodView",["app/view/MethodViewClass","js/core/Element","js/html/A","js/html/HtmlElement","js/ui/ItemsView","js/core/Template","js/core/Repeat"],function(e,t){return e.inherit({_$descriptor:t.xmlStringToDom('<view:MethodViewClass xmlns:ui="js.ui" xmlns:js="js.core" xmlns="http://www.w3.org/1999/xhtml" componentClass="method-view" class="{methodCSSClasses()}" selected="{expandable.selected}" method="null" xmlns:view="app.view">\n        <a class="side-expandable" selectable="true" cid="expandable">\n            <span></span>\n        </a>\n        <div class="method-signature">\n            <span class="method-name">${method.name}</span>(\n            <ui:ItemsView items="${method.parameter}" itemKey="parameter" class="parameter-list" tagName="span">\n                <js:Template name="item">\n                    <span>\n                        <span visible="${parameter.optional}">\n                            [\n                        </span>\n                        ${parameter.name}\n                        <span visible="${parameter.hasTypeDefinition()}">\n                            :\n                            <a href="api/${parameter.types[0]}">\n                                ${parameter.getFirstTypeName()}\n                            </a>\n                        </span>\n                        <span visible="${parameter.optional}">\n                            ]\n                        </span>\n                    </span>\n                </js:Template>\n            </ui:ItemsView>\n            )\n            <span visible="${method.hasReturnType()}">\n                :\n                <a href="api/${method.returns.types[0]}">\n                    ${method.getFirstReturnTypeName()}\n                </a>\n            </span>\n        </div>\n        <a class="defined-by" href="{definedByLink}">${method.definedBy}</a>\n        <div class="description-wrapper">\n            <p class="description">${method.description}</p>\n            <ul class="parameters ">\n                <js:Repeat items="${method.parameter}" itemKey="parameter">\n                    <li>\n                        <span visible="${parameter.optional}">[</span>\n                        <span class="parameter-name">${parameter.name}</span>\n                        <span visible="${parameter.hasTypeDefinition()}">: ${parameter.getFirstTypeName()}</span>\n                        <span visible="${parameter.optional}">]</span>\n                        <span visible="${parameter.description}" class="parameter-description"> - ${parameter.description} </span>\n                    </li>\n                </js:Repeat>\n            </ul>\n        </div>\n</view:MethodViewClass>')})}),define("xaml!app/module/Documentation",["app/module/DocumentationClass","js/core/Element","js/core/Injection","documentation/data/DocumentationDataSource","js/conf/DataSourceConfiguration","js/conf/ResourceConfiguration","js/data/FilterDataView","js/core/Router","js/conf/RouteConfiguration","js/core/Head","js/core/Content","js/html/HtmlElement","xaml!js/ui/TreeView","js/core/Template","js/html/A","js/ui/ListView","xaml!js/ui/Checkbox","js/ui/ItemsView","md/View","js/html/Input","xaml!app/view/MethodView"],function(e,t){return e.inherit({_$descriptor:t.xmlStringToDom('<module:DocumentationClass xmlns="http://www.w3.org/1999/xhtml" xmlns:js="js.core" xmlns:ui="js.ui" xmlns:conf="js.conf" xmlns:data="js.data" xmlns:module="app.module" xmlns:md="md" xmlns:view="app.view" xmlns:ddata="documentation.data">\n\n    <js:Injection>\n        <ddata:DocumentationDataSource cid="api" endPoint="http://rappidjs.com/doc" gateway=".">\n            <conf:DataSourceConfiguration>\n                <conf:ResourceConfiguration path="doc" modelClassName="documentation.model.Package" processor="PackageProcessor">\n                    <conf:ResourceConfiguration path="/" modelClassName="documentation.model.Class"/>\n                </conf:ResourceConfiguration>\n            </conf:DataSourceConfiguration>\n        </ddata:DocumentationDataSource>\n    </js:Injection>\n\n\n    <data:FilterDataView baseList="{classes}" cid="filteredClasses" filterFnc="{filterDocs}" searchString="{searchString}"/>\n\n    <js:Router>\n        <conf:RouteConfiguration onexec="defaultRoute" route="^api$"/>\n        <conf:RouteConfiguration onexec="showClass" route="^api\\/(?:([^/]+)\\/)?\\/?(.+)$"/>\n    </js:Router>\n\n    <js:Head title="{title(doc.id)} - rAppidjs API Reference" author="Tony Findeisen &amp; Marcus Krejpowicz"/>\n\n    <js:Content name="main">\n        <div id="documentation">\n            <div class="row">\n                <div class="span3 classes">\n                    <ui:TreeView node="{packageTree}" selectedNode="{selectedNode}">\n                        <js:Template name="label">\n                            <a href="${hrefForNode(item)}">\n                                <i class="icon icon-{iconClassForNode(item,item.expanded)}"></i>\n                                ${labelForNode(item)}\n                            </a>\n                        </js:Template>\n                    </ui:TreeView>\n                </div>\n                <div class="span9 content">\n                    <div cid="externalDocumentationView" visible="{_isCurrentView(externalDocumentationView)}">\n                        <p>\n                            <a href="{externalDocumentationSrc}" target="_blank">View documentation in external Window.\n                            </a>\n                        </p>\n                        <iframe frameborder="0" src="{externalDocumentationSrc}" onload="loadedInIFrame" width="100%" height="600px"></iframe>\n                    </div>\n                    <div cid="documentationView" visible="{_isCurrentView(documentationView)}">\n                        <h1>{doc.id}</h1>\n\n                        <p class="lead">\n                            {doc.summary}\n                        </p>\n                        <p>\n                            {doc.description}\n                        </p>\n\n                        <div class="row">\n                            <div class="span3">\n                                <dl class="dl-horizontal">\n                                    <dt>Package</dt>\n                                    <dd>{doc.packageName()}</dd>\n\n                                    <dt>Class</dt>\n                                    <dd>{doc.className()}</dd>\n\n                                    <dt>Inheritance</dt>\n                                    <dd>\n                                        <ui:ListView items="{doc.inheritancePath()}" class="inheritance">\n                                            <js:Template name="item">\n                                                <a href="{item.documentationLink()}">\n                                                    {item.className()}\n                                                </a>\n                                            </js:Template>\n                                        </ui:ListView>\n                                    </dd>\n                                    <dt visible="{doc.hasSee()}">See</dt>\n                                    <dd visible="{doc.hasSee()}">\n                                        <ui:ListView items="{doc.getSees()}">\n                                            <js:Template name="item">\n                                                <a href="{item.documentationLink()}">\n                                                    {item.className()}\n                                                </a>\n                                            </js:Template>\n                                        </ui:ListView>\n                                    </dd>\n                                </dl>\n                            </div>\n                            <div class="span3">\n                                <dl class="dl-horizontal">\n                                    <dt>Dependencies</dt>\n                                    <dd>\n                                        <ui:ListView items="{doc.dependencies()}" class="dependencies">\n                                            <js:Template name="item">\n                                                <a href="{item.documentationLink()}">\n                                                    {item.className()}\n                                                </a>\n                                            </js:Template>\n                                        </ui:ListView>\n                                    </dd>\n                                </dl>\n                            </div>\n                            <div class="span3">\n                                <dl class="dl-horizontal">\n                                    <dt>File</dt>\n                                    <dd>\n                                        <a href="{doc.fileLink()}">{doc.fileName()}</a>\n                                    </dd>\n                                </dl>\n                            </div>\n                        </div>\n                        <div class="row" selectable="true">\n                            <div class="span7">\n                                <h2>Default Attributes</h2>\n                                <blockquote>\n                                    <p>\n                                        The default attributes for this component.\n                                    </p>\n                                </blockquote>\n                            </div>\n                            <div class="span2">\n                                <fieldset class="well">\n                                    <ui:Checkbox label="public" cid="publicAttributesCheckbox" checked="true"/>\n                                    <ui:Checkbox label="protected" cid="protectedAttributesCheckbox"/>\n                                    <ui:Checkbox label="inherit" cid="inheritedAttributesCheckbox"/>\n                                </fieldset>\n                            </div>\n                        </div>\n                        <table class="table table-striped" visible="{defaultItemsView.items.length}">\n                            <thead>\n                                <tr>\n                                    <th width="50%">Attribute</th>\n                                    <th width="30%">Default Value</th>\n                                    <th width="20%">Defined By</th>\n                                </tr>\n                            </thead>\n                            <ui:ItemsView cid="defaultItemsView" items="{doc.getDefaults(showTypes(publicAttributesCheckbox.checked, protectedAttributesCheckbox.checked),inheritedAttributesCheckbox.checked)}" itemKey="item" tagName="tbody">\n                                <js:Template name="item">\n                                    <tr>\n                                        <td>\n                                            <strong>${item.name}</strong>\n                                            :\n                                            <ui:ItemsView items="${item.types}" itemKey="type" tagName="span">\n                                                <js:Template name="item">\n                                                    <span>${type}</span>\n                                                </js:Template>\n                                            </ui:ItemsView>\n                                            <p>\n                                                <md:View>\n                                                    ${item.description}\n                                                </md:View>\n                                            </p>\n                                        </td>\n                                        <td>\n                                            ${item.value()}\n                                        </td>\n                                        <td>\n                                            <a href="api/${item.definedBy}">\n                                                ${item.definedBy}\n                                            </a>\n                                        </td>\n                                    </tr>\n                                </js:Template>\n                            </ui:ItemsView>\n                        </table>\n\n                        <div class="row">\n                            <div class="span7">\n                                <h2>Properties</h2>\n                                <blockquote>\n                                    <p>\n                                        The default properties for this class.\n                                    </p>\n                                </blockquote>\n                            </div>\n                        </div>\n\n                        <table class="table table-striped">\n                            <thead>\n                                <tr>\n                                    <th width="50%">Property</th>\n                                    <th width="30%">Default Value</th>\n                                    <th width="20%">Defined By</th>\n                                </tr>\n                            </thead>\n                            <ui:ItemsView cid="propertiesView" items="{doc.getProperties()}" itemKey="item" tagName="tbody">\n                                <js:Template name="item">\n                                    <tr>\n                                        <td>\n                                            <strong>${item.name}</strong>\n                                            :\n                                            <ui:ItemsView items="${item.types}" itemKey="type" tagName="span">\n                                                <js:Template name="item">\n                                                    <span>${type}</span>\n                                                </js:Template>\n                                            </ui:ItemsView>\n                                            <p>\n                                                ${item.description}\n                                            </p>\n                                        </td>\n                                        <td>\n                                            ${item.value()}\n                                        </td>\n                                        <td>\n                                            <a href="api/${item.definedBy}">\n                                                ${item.definedBy}\n                                            </a>\n                                        </td>\n                                    </tr>\n                                </js:Template>\n                            </ui:ItemsView>\n                        </table>\n\n\n                        <div class="row">\n                            <div class="span7">\n                                <h2>Methods</h2>\n                                <blockquote>\n                                    <p>\n                                        A method is a piece of code that is called by name\n                                        that is associated with an\n                                        object.\n                                    </p>\n                                    <small>\n                                        Andrew Edgecombe\n                                    </small>\n                                </blockquote>\n                            </div>\n                            <div class="span2">\n                                <fieldset class="well">\n                                    <label class="checkbox">\n                                        <input type="checkbox" cid="showPublic" checked="checked"/>\n                                        public\n                                    </label>\n                                    <label class="checkbox">\n                                        <input type="checkbox" cid="showProtected"/>\n                                        protected\n                                    </label>\n                                    <label class="checkbox">\n                                        <input type="checkbox" cid="showInherit"/>\n                                        inherit\n                                    </label>\n                                </fieldset>\n                            </div>\n                        </div>\n\n\n                        <ui:ItemsView items="{doc.methods}" itemKey="methodItem">\n                            <js:Template name="item">\n                                <view:MethodView method="${methodItem}" definedByLink="{getDocumentationLink(method.definedBy)}" visible="{isMethodVisible(method,showTypes(showPublic.checked, showProtected.checked),showInherit.checked)}"/>\n                            </js:Template>\n                        </ui:ItemsView>\n\n\n                        <div visible="{hasSection(\'staticMethods\')}">\n                            <div class="row">\n                                <div class="span7">\n                                    <h2>Static Methods</h2>\n                                    <blockquote>\n                                        <p>\n                                            Static methods exported by the class\n                                        </p>\n                                    </blockquote>\n                                </div>\n                                <div class="span2">\n                                    <fieldset class="well">\n                                        <label class="checkbox">\n                                            <input type="checkbox" cid="showPublicStatic" checked="checked"/>\n                                            public\n                                        </label>\n                                        <label class="checkbox">\n                                            <input type="checkbox" cid="showProtectedStatic"/>\n                                            protected\n                                        </label>\n                                    </fieldset>\n                                </div>\n                            </div>\n\n                            <ui:ItemsView items="{doc.getStaticMethods(showTypes(showPublicStatic.checked, showProtectedStatic.checked))}" itemKey="methodItem">\n                                <js:Template name="item">\n                                    <view:MethodView method="{methodItem}"/>\n                                </js:Template>\n                            </ui:ItemsView>\n\n                        </div>\n                    </div>\n                    <div cid="moduleView" visible="{_isCurrentView(moduleView)}">\n                        <div class="jumbotron">\n                            <h1>API Reference for {module.name}</h1>\n\n                            <h2 class="sub" visible="{module.title}">\n                                {module.title}\n                            </h2>\n                            <blockquote visible="{module.description}">\n                                <p>{module.description}</p>\n                            </blockquote>\n\n                            <blockquote visible="{not(module.description)}">\n                                <p class="lead">\n                                    This api reference has been created using the\n                                    \'rappidjs doc\' command\n                                    which generated the documentation files by parsing the\n                                    js and xaml source files\n                                    with the help of\n                                    <a href="http://esprima.org/">esprima</a>\n                                    and<a href="https://github.com/jindw/xmldom">\n                                    xmldom</a>.\n                                </p>\n                                <small>\n                                    Tony Findeisen\n                                </small>\n                            </blockquote>\n\n                            <p class="lead">\n                                Select a class from the left side or start with the\n                                documentation of\n                                <a href="api/{module.id()}/{module.firstClass()}">\n                                    {module.firstClass()}</a>.\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </js:Content>\n</module:DocumentationClass>')})}),define("app/module/Documentation",function(){});