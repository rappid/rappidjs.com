define(["js/core/Component","underscore"],function(e,t){return e.inherit("js.core.PopupManager",{showPopup:function(e,n,r){if(!this.runsInBrowser())throw new Error("Cannot open popups.");n=n||{};var i=this.$stage.$window,s=[];n=t.defaults(n,{name:null,menubar:!1,toolbar:!1,location:!1,personalbar:!1,status:!1,resizeable:!0,scrollbars:!0,dependend:!1,dialog:!1,minimizable:!0,top:null,left:null,height:null,width:null});for(var o in n)n.hasOwnProperty(o)&&o!=="name"&&(n[o]===!0?s.push(o+"=yes"):n[o]&&s.push(o+"="+n[o]));return i.open(e,n.name,s.join(","),r)},showPopupAsync:function(e,t,n,r){var i=this.showPopup(e,t);this.$stage.$window.focus();if(n)try{n(i,function(e,t){i.focus(),e?i.close():t&&(i.location=t),r&&r(e)})}catch(s){r&&r(s)}else r&&r(new Error("No task specified"))}})});