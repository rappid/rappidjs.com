define(["js/html/HtmlElement"],function(e){var t=/^(([^:]+:\/\/)|(javascript:)|(\/\/))/i,n=/^#?\/?/,r=/^#?(.*)$/;return e.inherit("js.html.A",{defaults:{tagName:"a",target:null,href:null},_initializationComplete:function(){this.callBase();var e=this.$stage.$history;e.$.useState&&this.bind("on:click",function(t){if(t.isDefaultPrevented)return;t.preventDefault(),e.navigate(this.plainHref())},this)},plainHref:function(){var e=this.$.href||"";return e.replace(n,"")},_renderHref:function(e){e=e||"javascript:void(0);";if(this.$.target!=="external"&&!t.test(e)&&this.$.target!=="_blank"){var n=this.plainHref();e="#/"+n,this.runsInBrowser()?this.$stage.$history.$.useState&&(e=n):e=e.replace(r,"#!$1")}this.$el.setAttribute("href",e)},_renderTarget:function(e){e&&e!=="external"&&this.$el.setAttribute("target",e)}})});